(function(e,t,n){"use strict";function r(e){if(e){var n=e.split("."),r=t,i;for(i in n)r[n[i]]||(r[n[i]]={}),r=r[n[i]];return!0}return!1}r("cache.storage.adapter"),r("helpers"),r("controllers"),r("models"),r("views"),e.app=t})(window,window.app||{}),function(e,t,n,r){"use strict";var i=function(){var n=null,s=e.console!==r&&e.console.log,o=e.console!==r&&console.time!==r&&console.timeEnd!==r,u=[];return{logToScreen:function(e){var n=t.getElementById("log"),r=t.createElement("p"),i=t.createTextNode(e);n&&(r.appendChild(i),n.appendChild(r))},log:function(t){s&&e.console.log(t),i.logToScreen(t)},logTimerStart:function(t){o&&e.console.time(t)},logTimerEnd:function(t){o&&e.console.timeEnd(t)},bind:function(n,r,s){typeof e.addEventListener=="function"?i.bind=function(e,t,n){e.addEventListener(t,n,!1)}:typeof t.attachEvent=="function"?i.bind=function(e,t,n){e.attachEvent("on"+t,n)}:i.bind=function(e,t,n){e["on"+t]=n},i.bind(n,r,s)},unbind:function(n,r,s){typeof e.removeEventListener=="function"?i.unbind=function(e,t,n){e.removeEventListener(t,n,!1)}:typeof t.detachEvent=="function"?i.unbind=function(e,t,n){e.detachEvent("on"+t,n)}:i.unbind=function(e,t){e["on"+t]=null},i.unbind(n,r,s)},createDomNode:function(e,n){var r=t.createElement(e),i;if(n)for(i in n)n.hasOwnProperty(i)&&r.setAttribute(i,n[i]);return r},getXhr:function(){var e=null,t=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],n=t.length,r=0;for(r=0;r<n;r+=1){try{e=t[r]()}catch(i){continue}break}return e},xhr:function(e,t,n){var s=i.getXhr(),o,u="GET";s?(n!==r?u="POST":n=null,o=function(){if(s.readyState===4&&(s.status>=200&&s.status<400||s.status===0))try{var e=s.responseText;e?t(e):t(!1)}catch(n){t(!1)}},s.open(u,e,!0),s.onreadystatechange!==r?s.onreadystatechange=o:s.onload!==r&&(s.onload=o),s.send(n)):t(!1)},getJson:function(){return null===n&&e.JSON&&e.JSON.stringify&&(n=e.JSON),n},jsonToString:function(e){var t=!1;return null===n&&(n=i.getJson()),n&&e&&(t=n.stringify(e)),t},jsonToObject:function(e){var t=!1;return null===n&&(n=i.getJson()),n&&e&&(t=n.parse(e)),t},url:function(e){if(!e)return;var n=t.createElement("a"),r;return n.href=e,r=n.pathname.match(/\/([^\/?#]+)$/i),{source:e,protocol:n.protocol,host:n.hostname,port:n.port,query:n.search,file:r?r[1]:"/",hash:n.hash,path:n.pathname.replace(/^([^\/])/,"/$1"),folder:function(){var t=e.lastIndexOf("/"),n=e.substr(0,t+1);return n}()}},callback:function(e){if(!e||typeof e!="function")e=function(){};return e},isArray:function(e){return e instanceof Array},inArray:function(e,t,n){return Array.prototype.indexOf?u.indexOf.call(t,e,n):-1},hasClass:function(e,t){return(new RegExp(" "+t+" ")).test(" "+e.className+" ")}}}();n.helpers.utils=i}(window,document,window.app||{}),function(e,t,n,r){"use strict";var i=function(){function C(){var t=parseInt(e.orientation,10);switch(t){case 0:E=w;break;case 180:E=w;break;case 90:E=b;break;case-90:E=b;break;default:}}function k(){i=x.toLowerCase().match(/(iphone|ipod|ipad)/)!==null,i&&N(e,"orientationchange",C)}function L(){s=x.toLowerCase().match(/(webkit)/)!==null}function A(){o=x.toLowerCase().match(/(android)/)!==null,o&&N(e,"orientationchange",C)}function O(){u=x.toLowerCase().match(/(blackberry)/)!==null,u&&N(e,"orientationchange",C)}function M(){a=x.toLowerCase().match(/(opera)/)!==null}function _(){f=x.toLowerCase().match(/(chrome)/)!==null}function D(){l=x.toLowerCase().match(/(safari)/)!==null}function P(){c=x.toLowerCase().match(/(firefox)/)!==null}function H(){h=x.toLowerCase().match(/(seamonkey)/)!==null}function B(){p=x.toLowerCase().match(/(camino)/)!==null}function j(){d=x.toLowerCase().match(/(msie)/)!==null}function F(){v=x.toLowerCase().match(/(ipad)/)!==null,v&&N(e,"orientationchange",C)}function I(){m=!1;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(x)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(x.substr(0,4)))m=!0;m&&N(e,"orientationchange",C)}function q(){var e,n;n=x.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i),n&&(e=x.match(/version\/([\.\d]+)/i))!==null&&(n[2]=e[1]),g=n?n[2]:t.appVersion}function R(){var e=t.connection||t.mozConnection||t.webkitConnection||{type:0,UNKNOWN:0,ETHERNET:1,WIFI:2,CELL_2G:3,CELL_3G:4},n=function(){y=e};e.onchange=n,n()}var i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b="landscapeMode",w="portraitMode",E,S,x=t.userAgent||t.vendor||e.opera,T=n.helpers.utils,N=T.bind;return{isiOS:function(){return i===r&&k(),i},isWebkit:function(){return s===r&&L(),s},isAndroid:function(){return o===r&&A(),o},isBlackberry:function(){return u===r&&O(),u},isChrome:function(){return f===r&&_(),f},isOpera:function(){return a===r&&M(),a},isSafari:function(){return l===r&&D(),l},isFirefox:function(){return c===r&&P(),c},isSeamonkey:function(){return h===r&&H(),h},isCamino:function(){return p===r&&B(),p},isMsie:function(){return d===r&&j(),d},isiPad:function(){return v===r&&F(),v},isMobile:function(){return m===r&&I(),m},getBrowserVersion:function(){return g===r&&q(),g},getNetworkConnection:function(){return y===r&&R(),y},isStandalone:function(){return t.standalone!==r&&e.navigator.standalone},isOnline:function(){return t.onLine},orientation:function(){return e.orientation?e.orientation:0},orientationMode:function(){return E===r&&C(),E},hasRetinaDisplay:function(){return e.devicePixelRatio>=2},hasCanvas:function(){if(S===r){var e=document.createElement("canvas");S=!!e.getContext&&!!e.getContext("2d")}return S}}}();n.helpers.client=i}(window,navigator,window.app||{}),function(e,t,n){"use strict";function r(t,n){return n&&(n.dom?t=n.dom:n.id&&(t=e.getElementById(n.id))),t}var i=function(){var n=t.helpers,i=n.utils,s=i.createDomNode,o=n.client,u=[],a=[],f=[],l=e.getElementsByTagName("head")[0];return{appendCss:function(t,n,a,f){if(i.inArray(t,u)===-1){var c=null,h;c=r(c,f);if(null!==n){c||(c=s("style",{type:"text/css"})),f||l.appendChild(c);try{h=e.createTextNode(n),c.appendChild(h)}catch(p){c.styleSheet.cssText=n}finally{a()}}else t!==null&&(c||(c=s("link",{rel:"stylesheet",type:"text/css"})),f||l.appendChild(c),o.isMsie||o.isOpera?c.onload=a:a(),c.href=t);u.push(t)}else a()},appendJs:function(t,n,o,u){if(i.inArray(t,a)===-1){var f=s("script"),c=e.getElementsByTagName("script")[0],h=!1;f=r(f,u),f.type="text/javascript",f.async=!0,f.onreadystatechange=f.onload=function(){!h&&(!this.readyState||this.readyState==="complete"||this.readyState==="loaded")&&(this.onreadystatechange=this.onload=null,h=!0,a.push(t),o())},f.onerror&&(f.onerror=function(){this.onload=this.onreadystatechange=this.onerror=null,o()}),u||(c?c.parentNode.insertBefore(f,c):l.appendChild(f)),!!n&&!h?(f.textContent?f.textContent=n:f.nodeValue?f.nodeValue=n:f.text=n,h=!0):null!==t&&(f.src=t),h&&(a.push(t),o())}else o()},appendImg:function(e,t,n,i){var s=null;s=r(s,i),s||(s=new Image),s.onload=n,t?s.src=t:e&&(s.src=e),f.push(e)}}}();t.helpers.append=i}(document,window.app||{}),function(e,t,n){"use strict";function a(e){var t="";switch(e.code){case FileError.QUOTA_EXCEEDED_ERR:t="["+r+" Adapter] File System Event: QUOTA_EXCEEDED_ERR";break;case FileError.NOT_FOUND_ERR:t="["+r+" Adapter] File System Event: NOT_FOUND_ERR, file does not exist";break;case FileError.SECURITY_ERR:t="["+r+" Adapter] File System Event: SECURITY_ERR";break;case FileError.INVALID_MODIFICATION_ERR:t="["+r+" Adapter] File System Event: INVALID_MODIFICATION_ERR";break;case FileError.INVALID_STATE_ERR:t="["+r+" Adapter] File System Event: INVALID_STATE_ERR";break;default:t="["+r+" Adapter] File System Event: Unknown Error"}s(t)}function f(e,t,n){if(t[0]==="."||t[0]==="")t=t.slice(1);t[0]?e.getDirectory(t[0],{create:!0},function(e){t.length?f(e,t.slice(1),n):n()},a):n()}function l(e,t,n){var r=t.split("/"),i=r.length,s="",u=0;n=o(n);if(i){for(u=0;u<i-1;u+=1)s=s+r[u]+"/";f(e.root,s.split("/"),n)}else n()}function c(e){var t=this;t.adapter=null,t.type=r,t.size=52428800,t.init(e)}var r="fileSystem",i=t.helpers.utils,s=i.log,o=i.callback,u=null;c.prototype=c.fn={isSupported:function(){return null===u&&(u=(!!e.requestFileSystem||!!e.webkitRequestFileSystem)&&!!e.Blob,u||s("["+r+" Adapter] "+r+" is not supported")),u},open:function(t){var n=this,o=n.adapter;null===o?(e.requestFileSystem=e.requestFileSystem||e.webkitRequestFileSystem,e.requestFileSystem(e.TEMPORARY,n.size,function(e){o=n.adapter=e,s("["+r+" Adapter] Try to create test resource");try{n.create("test-item",i.jsonToString({test:"test-content"}),function(e){e?n.remove("test-item",function(){s("["+r+" Adapter] Test resource created and successfully deleted"),t(o);return}):t(!1)})}catch(u){a(u),t(!1)}},a)):t(o)},create:function(e,t,n){var r=this.adapter,i=function(e){a(e),n(!1,e)};l(r,e,function(){r.root.getFile(e,{create:!0},function(e){e.createWriter(function(e){e.onwriteend=function(){n(!0)},e.onerror=i;try{var r=new Blob([t],{type:"text/plain"});e.write(r)}catch(s){i(s)}},i)},i)})},read:function(e,t){var n=this.adapter,r=function(e){a(e),t(!1,e)};l(n,e,function(){n.root.getFile(e,{create:!1},function(e){e.file(function(e){var n=new FileReader;n.onloadend=function(){t(this.result)},n.readAsText(e)},r)},r)})},update:function(e,t,n){this.create(e,t,n)},remove:function(e,t){var n=this.adapter,r=function(n){a(n),t(e,n)};l(n,e,function(){n.root.getFile(e,{create:!1},function(e){e.remove(function(){t()},r)},r)},r)},init:function(e){var t=this;return t.isSupported()?(e&&e.size&&(t.size=e.size),t):!1}},t.cache.storage.adapter[r]=c}(window,window.app||{}),function(e,t,n){"use strict";function u(e){var t=this;t.adapter=null,t.type=r,t.dbName="merkel",t.dbVersion="1.0",t.dbTable="offline",t.dbDescription="Local cache",t.dbKey="key",t.init(e)}var r="indexedDatabase",i=t.helpers.utils,s=i.log,o=null;u.prototype=u.fn={isSupported:function(){return null===o&&(o=!!e.indexedDB||!!e.webkitIndexedDB||!!e.mozIndexedDB||!!e.OIndexedDB||!!e.msIndexedDB,o||s("["+r+" Adapter] "+r+" is not supported")),o},create:function(e,t,n){var i=this,o=i.dbTable,u=i.dbName,a=i.adapter.transaction([o],"readwrite"),f=a.objectStore(o).put({key:e,content:t});a.onerror=function(e){s("["+r+" Adapter] Failed to init transaction while creating/updating database entry "+u+" "+e),n(!1,e)},f.onerror=function(e){s("["+r+" Adapter] Failed to create/update database entry "+u+" "+e),n(!1,e)},f.onsuccess=function(){n(!0)}},read:function(e,t){var n=this,i=n.dbTable,o=n.dbName,u=n.adapter.transaction([i],"readonly"),a=u.objectStore(i).get(e);if(!u||!a){t(!1);return}u.onerror=function(e){s("["+r+" Adapter] Failed to init transaction while reading database "+o+" "+e)},a.onerror=function(e){s("["+r+" Adapter] Failed to read database entry "+o+" "+e),t(!1,e)},a.onsuccess=function(e){e.target.result&&e.target.result.content?t(e.target.result.content):t(!1)}},update:function(e,t,n){this.create(e,t,n)},remove:function(e,t){var n=this,i=n.dbTable,o=n.dbName,u=n.adapter.transaction([i],"readwrite"),a=u.objectStore(i),f=a(i).put({key:e,content:""});u.onerror=function(e){s("["+r+" Adapter] Failed to init transaction while deleting database entry "+o+" "+e),t(!1,e)},f.onerror=function(e){s("["+r+" Adapter] Failed to delete database entry "+o+" "+e),t(!1,e)},f.onsuccess=function(){t(!0)}},open:function(t,i){var o=this,u=null,a=null,f=null,l=o.dbName,c=o.dbTable,h,p,d,v;i||(i=!1);if(null===o.adapter){u=e.indexedDB||e.webkitIndexedDB||e.mozIndexedDB||e.OIndexedDB||e.msIndexedDB;if(!u){t(!1);return}e.webkitIndexedDB!==n&&(e.IDBTransaction=e.webkitIDBTransaction,e.IDBKeyRange=e.webkitIDBKeyRange),h=function(e){var n=a.result;o.adapter=n,o.dbVersion===n.version||!n.setVersion&&typeof n.setVersion!="function"?t(n):(f=e.currentTarget.result.setVersion(o.dbVersion),f.onfailure=function(e){s("["+r+" Adapter] Failed to open database: "+l+" "+e),t(!1)},f.onsuccess=function(e){var t=a.result,n=t.createObjectStore(c,{keyPath:o.dbKey});s("["+r+" Adapter] Database needs upgrade: "+l+" "+e.oldVersion+" "+e.newVersion),n.createIndex("key","key",{unique:!0}),n.createIndex("content","content",{unique:!1})})},p=function(e){var t=a.result,n=t.createObjectStore(c,{keyPath:o.dbKey});s("["+r+" Adapter] Database needs upgrade: "+l+" "+e.oldVersion+" "+e.newVersion),n.createIndex("key","key",{unique:!0}),n.createIndex("content","content",{unique:!1})},d=function(e){s("["+r+" Adapter] Failed to open database: "+l+" "+e),i||o.open(t,!0),t(!1)},v=function(e){s("["+r+" Adapter] Opening database request is blocked! "+l+" "+e),t(!1)},i?a=u.open(l,o.dbVersion):a=u.open(l),a.onsuccess=h,a.onupgradeneeded=p,a.onerror=d,a.onblocked=v}else t(o.adapter)},init:function(e){var t=this;return t.isSupported()?(e&&(e.name&&(t.dbName=e.name),e.version&&(t.dbVersion=e.version),e.table&&(t.dbTable=e.table),e.description&&(t.dbDescription=e.description),e.key&&(t.dbKey=e.key)),t):!1}},t.cache.storage.adapter[r]=u}(window,window.app||{}),function(e,t,n){"use strict";function u(e,t,n,r,i,s){!s&&e?e.transaction(function(e){e.executeSql(t,n,r,i)}):s?s.executeSql(t,n,r,i):i(null,{code:0,message:"The storage adapter isn't available"})}function a(e){var t="["+r+" Adapter] Errorcode: "+e.code+", Message: "+e.message;e.info&&(t=t+" - "+e.info),s(t)}function f(e){var t=this;t.adapter=null,t.type=r,t.dbName="merkel",t.dbVersion="1.0",t.dbDescription="resource cache",t.dbTable="cache",t.dbSize=4194304,t.init(e)}var r="webSqlDatabase",i=t.helpers.utils,s=i.log,o=null;f.prototype=f.fn={isSupported:function(){return null===o&&(o=!!e.openDatabase,o||s("["+r+" Adapter] "+r+" is not supported")),o},create:function(e,t,n){var r=this,i=function(){n(!0)},s=function(e,t){a(t),n(!1,t,{transaction:e})};u(r.adapter,"INSERT INTO "+r.dbTable+" (key, content) VALUES (?,?);",[e,t],i,s)},read:function(e,t){var n=this,r=function(e,n){var r=null;n&&n.rows&&n.rows.length===1&&(r=n.rows.item(0).content),t(r,null,{transaction:e})},i=function(e,n){a(n),t(!1,n,{transaction:e})};u(n.adapter,"SELECT content FROM "+n.dbTable+" WHERE key=?;",[e],r,i)},update:function(e,t,n){var r=this,i=function(){n(!0)},s=function(e,t){a(t),n(!1,t,{transaction:e})};u(r.adapter,"UPDATE "+r.dbTable+" SET content = ?  WHERE key=?;",[t,e],i,s)},remove:function(e,t){var n=this,r=function(){t(!0)},i=function(e,n){a(n),t(!1,n,{transaction:e})};u(n.adapter,"DELETE FROM "+n.dbTable+" WHERE key = ?;",[e],r,i)},open:function(t){var n=this,r=n.adapter,i=function(e,r){u(e,"CREATE TABLE IF NOT EXISTS "+n.dbTable+"(id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, key TEXT NOT NULL UNIQUE, content TEXT NOT NULL);",[],function(){t(e)},function(e){a(e),t(!1)},r)},s=function(e){i(null,e)},o=function(e){e.info="Can't migrate to new database version and using localStorage instead. This may be caused by non-standard implementation of the changeVersion method. Please switch back your database version to use webSql on this device.",a(e),t(!1)};try{if(null===r&&n.isSupported()){n.adapter=e.openDatabase(n.dbName,"",n.dbDescription,n.dbSize);if(String(n.adapter.version)===String(n.dbVersion)||!n.adapter.changeVersion||typeof n.adapter.changeVersion!="function")n.adapter=e.openDatabase(n.dbName,n.dbVersion,n.dbDescription,n.dbSize),i(n.adapter);else try{n.adapter.changeVersion(n.adapter.version,n.dbVersion,s,o)}catch(f){a(f),t(!1)}}else n.isSupported()&&t(r)}catch(f){a(f),t(!1)}},init:function(e){var t=this;return t.isSupported()?(e&&(e.description&&(t.dbDescription=e.description),e.name&&(t.dbName=e.name),e.size&&(t.dbSize=e.size),e.table&&(t.dbTable=e.table),e.version&&(t.dbVersion=String(e.version))),t):!1}},t.cache.storage.adapter[r]=f}(window,window.app||{}),function(e,t,n){"use strict";function p(t){!t&&e.event&&(t=e.event);var n="["+r+" Adapter] Event - key: "+(t.key||"no e.key event")+", url: "+(t.url||"no e.url event");s(n)}function d(e){var t=!1;switch(e){case"local":t="localStorage";break;case"session":t="sessionStorage";break;default:t="localStorage"}return t}function v(e){var t=this;t.adapter=null,t.type=r,t.lifetime="local",t.init(e)}var r="webStorage",i=t.helpers.utils,s=i.log,o=null,u,a,f,l,c;try{if(!e.localStorage){if(e.globalStorage)try{e.localStorage=e.globalStorage}catch(h){s("["+r+" Adapter] Try to init globalStorage failed")}e.localStorage||(u=document.createElement("div"),a="localStorage",u.style.display="none",document.getElementsByTagName("head")[0].appendChild(u),u.addBehavior&&(u.addBehavior("#default#userdata"),l=function(e){return e.replace(/[^\-._0-9A-Za-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u37f-\u1fff\u200c-\u200d\u203f\u2040\u2070-\u218f]/g,"-")},f=e[a]={length:0,setItem:function(e,t){u.load(a),e=l(e),u.getAttribute(e)||(this.length=this.length+1),u.setAttribute(e,t),u.save(a)},getItem:function(e){return u.load(a),e=l(e),u.getAttribute(e)},removeItem:function(e){u.load(a),e=l(e),u.removeAttribute(e),u.save(a),this.length=this.length-1,this.length<0&&(this.length=0)},clear:function(){u.load(a);var e=0;while(c=u.XMLDocument.documentElement.attributes[e++])u.removeAttribute(c.name);u.save(a),this.length=0},key:function(e){return u.load(a),u.XMLDocument.documentElement.attributes[e]}},u.load(a),f.length=u.XMLDocument.documentElement.attributes.length))}}catch(h){alert(h)}v.prototype=v.fn={isSupported:function(){var t=this,n=d(t.lifetime);if(null===o)try{o=!!e[n].getItem}catch(i){s("["+r+" Adapter] "+r+" is not supported"),o=!1}return o},create:function(e,t,n){try{this.adapter.setItem(e,t),n(!0)}catch(r){p(r),n(!1,r)}},read:function(e,t){var n=this,r;try{r=n.adapter.getItem(e),r?t(r):t(!1)}catch(i){p(i),t(!1,i)}},update:function(e,t,n){this.create(e,t,n)},remove:function(e,t){try{this.adapter.removeItem(e),t(e)}catch(n){p(n),t(!1,n)}},open:function(t){var n=this,o=n.adapter,u=d(n.lifetime);if(null===o)try{o=n.adapter=e[u],i.bind(e,"storage",p),s("["+r+" Adapter] Try to create test resource"),n.create("test-item",'{test: "test-content"}',function(e){e?n.remove("test-item",function(){s("["+r+" Adapter] Test resource created and successfully deleted"),t(o);return}):t(!1)})}catch(a){t(!1);return}else n.isSupported()&&t(o)},init:function(e){var t=this;return t.isSupported()?(e&&e.lifetime&&(t.lifetime=e.lifetime),t):!1}},t.cache.storage.adapter[r]=v}(window,window.app||{}),function(e,t,n,r){"use strict";function h(){var e=this;e.adapter=null,e.type=i,e.isLoaded=!1,e.delay=0,e.init()}var i="applicationCache",s=n.helpers,o=s.utils,u=s.client,a=o.log,f=o.callback,l=null,c=t.getElementsByTagName("html")[0];h.prototype={isSupported:function(){return null===l&&(l=!!e.applicationCache&&!!c.getAttribute("manifest"),l||a("["+i+" Adapter] "+i+" is not supported")),l},loaded:function(t){var n=this;n.isLoaded||(n.isLoaded=!0,e.setTimeout(function(){t()},n.delay))},open:function(n){var s=this,u=s.adapter,l=0,c;n=f(n);if(s.isSupported()&&null!==u){c=function(){a("["+i+" Adapter] Event updateready");try{u.swapCache()}catch(t){a("["+i+" Adapter] Event updateready: swapcache is not available")}return confirm("Es ist eine neue Version dieser Webseite verfügbar. Möchten Sie die Seite aktualisieren?")?e.location.reload(!0):s.loaded(n),!1},u.addEventListener("checking",function(){return a("["+i+" Adapter] Event checking"),!1}),u.addEventListener("noupdate",function(){return a("["+i+" Adapter] Event noupdate"),s.loaded(n),!1}),u.addEventListener("downloading",function(){return a("["+i+" Adapter] Event downloading"),l=0,!1}),u.addEventListener("progress",function(e){a("["+i+" Adapter] Event progress"),s.delay=500;var n="",o=t.getElementById("layer-loading-bar");return e&&e.lengthComputable!==r?(n=" "+Math.round(100*e.loaded/e.total)+"%",o&&(o.style.width=n)):l+=1,!1}),u.addEventListener("cached",function(){return a("["+i+" Adapter] Event cached"),s.loaded(n),!1}),u.addEventListener("updateready",function(){c()}),u.addEventListener("obsolete",function(){return a("["+i+" Adapter] Event obsolete"),e.location.reload(!0),!1}),u.addEventListener("error",function(){return a("["+i+" Adapter] Event error"),s.loaded(n),!1});switch(u.status){case u.UNCACHED:s.loaded(n);break;case u.IDLE:s.loaded(n);break;case u.UPDATEREADY:c();break;case u.OBSOLETE:s.loaded(n);break;default:}o.bind(e,"online",function(){try{u.update()}catch(e){a("["+i+" Adapter] Window event online: update cache is not available")}}),e.setTimeout(function(){s.isLoaded||s.loaded(n)},12e3)}else s.loaded(n)},init:function(){var t=this,n=t.adapter;return t.isSupported()&&null===n&&(n=t.adapter=e.applicationCache),t}},n.cache.storage.adapter[i]=h}(window,document,window.app||{}),function(e,t,n){"use strict";function g(e){return o.jsonToString(e)}function y(e){var t=null;try{t=o.jsonToObject(e)}catch(n){u("["+r+" controller] Couldn't convert json string to object.")}return t}function b(t,n,r){if(s.hasCanvas()){var i=e.createElement("canvas"),o,u=new Image,a=null,f=0,l=0;r||(r="jpeg"),u.onload=function(){f=i.height=u.height,l=i.width=u.width,o=i.getContext("2d"),o.fillStyle="rgba(50, 50, 50, 0)",o.fillRect(0,0,l,f),o.drawImage(u,0,0),a=i.toDataURL("image/"+r),n(a)},u.src=t}else n(!1)}function w(e,t){if(t.type==="css"){var n=o.urlParts(t.url);return e.replace(/url\("../g,'url("'+n.folder+"..")}return e}function E(e){return{data:e.data,lifetime:e.lifetime||m.lifetime,expires:(new Date).getTime()+(e.lifetime||m.lifetime),group:e.group||m.group,lastmod:e.lastmod||m.lastmod,type:e.type||m.type,version:e.version||m.version}}function S(e){return v&&v[e]?!!v[e]:!1}function x(e,t){var n=null,i;if(!e||!e.length){d||t(!1);return}i=e[0].type,u("["+r+" controller] Testing for storage adapter type: "+i),c[i]?n=new c[i](p):x(e.slice(1),t),n&&n.isSupported()?n.open(function(s){s?(d=i,v=e[0],u("["+r+" controller] Used storage adapter type: "+d),t(n)):x(e.slice(1),t)}):x(e.slice(1),t)}function T(e,t){var n=null,i=0,s;if(t)try{u("["+r+" controller] Testing for storage adapter type: "+t),c[t]?n=new c[t](p):T(e),n&&n.isSupported()?n.open(function(o){if(!o)T(e);else{d=t,s=h.length;for(i=0;i<s;i+=1)h[i].type===t&&(v=h[i]);if(v){u("["+r+" controller] Used storage type: "+d),e(n);return}u("["+r+" controller] Storage config not found: "+d),T(e)}}):T(e)}catch(o){u("["+r+" controller] Storage adapter could not be initialized: type "+t),T(e)}else x(h,e)}function N(e,t){this.isEnabled=!0,this.adapter=null,this.appCacheAdapter=null,this.resourceDefaults=m,this.init(e,t)}var r="storage",i=t.helpers,s=i.client,o=i.utils,u=o.log,a=o.callback,f=o.getJson(),l=o.xhr,c=t.cache.storage.adapter,h=[{type:"fileSystem",css:!0,js:!0,html:!0,img:!0},{type:"indexedDatabase",css:!0,js:!0,html:!0,img:!0},{type:"webSqlDatabase",css:1,js:1,html:1,img:0},{type:"webStorage",css:!0,js:!0,html:!1,img:!1}],p={name:"merkel",table:"cache",description:"resource cache",size:4194304,version:"1.0",key:"key",lifetime:"local",offline:!0},d=null,v=null,m={lifetime:1e4,group:0,lastmod:(new Date).getTime(),type:"css",version:1};N.prototype={create:function(e,t){var n=this,i=e.url,s=e.type,o=function(o){e.data=o;if(null!==n.adapter&&S(s)){var a=g(i),f=g(E(e));try{n.adapter.create(a,f,function(n){n?(u("["+r+" controller] Create new resource in storage adapter: type "+s+", url "+i),t(e)):(u("["+r+" controller] Create new resource in storage adapter failed"),t(!1))})}catch(l){t(e)}}else u("["+r+" controller] Trying to create new resource, but resource type is not cachable or storage adapter is not available: type "+s+", url "+i),t(e)};t=a(t),s==="img"?b(i,o):l(i,o)},read:function(e,t){var n=this,i=e.url,s=e.type;t=a(t);if(null!==this.adapter&&S(s)){u("["+r+" controller] Trying to read resource from storage: type "+s+", url "+i);try{n.adapter.read(g(i),function(o){if(o){e=y(o);if(!e){n.adapter.remove(g(i),function(){u("["+r+" controller] Resource deleted from storage adapter to create a new one: type "+s+", url "+i),t(!1)});return}e.url=i,u("["+r+" controller] Successfully read resource from storage: type "+s+", url "+i),t(e)}else u("["+r+" controller] There is no data coming back from storage while reading: type "+s+", url "+i),t(!1)})}catch(o){l(i,function(n){e.data=n,u("["+r+" controller] Try to read resource from storage, but storage adapter is not available: type "+s+", url "+i),t(e)})}}else t(e)},update:function(e,t){var n=this,i=e.url,s=e.type,o=function(o){e.data=o;if(null!==n.adapter&&S(s)){var a=g(i),f=g(E(e));try{n.adapter.update(a,f,function(n){n?(u("["+r+" controller] Update existing resource in storage adapter: type "+s+", url "+i),t(e)):(u("["+r+" controller] Updating resource in storage failed."),t(!1))})}catch(l){t(e)}}else u("["+r+" controller] Resource type is not cachable or storage adapter is not available: type "+s+", url "+i),t(e)};t=a(t),e.type==="img"?b(i,o):l(i,o)},remove:function(e,t){var n=this,i=e.url,s=e.type;t=a(t),null!==n.adapter&&S(s)?n.adapter.remove(g(i),function(n){e=y(n);if(!e){t(!1);return}e.url=i,u("["+r+" controller] Delete resource form storage: type "+s+", url "+i),t(e)}):(u("["+r+" controller] Delete resource from storage failed, resource type is not cachable or there is no storage adapter: type "+s+", url "+i),t(e))},init:function(e,t){var i=this,s=!1;t&&t.isEnabled!==n&&(i.isEnabled=!!t.isEnabled),i.isEnabled&&f?(t&&(t.description&&(p.description=String(t.description)),t.key&&(p.key=String(t.key)),t.lifetime&&(p.lifetime=String(t.lifetime)),t.name&&(p.name=String(t.name)),t.size&&(p.size=parseInt(t.size,10)),t.table&&(p.table=String(t.table)),t.type&&(p.type=s=String(t.type)),t.version&&(p.version=t.version),t.offline&&(p.offline=t.offline)),p.offline&&c.applicationCache&&(i.appCacheAdapter=new c.applicationCache(p)),T(function(t){i.adapter=t,e(i)},s)):(f||u("["+r+" controller] There is no json support"),i.isEnabled||u("["+r+" controller] Caching data is disabled"),e(i))}},t.cache.storage.controller=N}(document,window.app||{}),function(e,t,n,r){"use strict";var i="cache",s=n.helpers,o=s.append,u=s.utils,a=u.log,f=u.callback,l={};l={storage:null,initialized:!1,load:function(e,t){var n=this,r=(new Date).getTime(),s=function(){var e=0,t=0,n=null;return{init:function(r,i){n=i,e=r,t=0},loaded:function(){t+=1,t===e&&n()}}}(),u=function(e,t){var n=e.url,r=function(){s.loaded()},i=e.node||null;switch(e.type){case"js":o.appendJs(n,t,r,i);break;case"css":o.appendCss(n,t,r,i);break;case"img":o.appendImg(n,t,r,i);break;default:}},l=function(e){var t=null,s=function(e){e&&e.data?u(e,e.data):u(e)},o=n.storage.resourceDefaults,f=!0;e.version=e.version?parseFloat(e.version):o.version,e.group=e.group?parseFloat(e.group):o.group,n.storage.read(e,function(l){e.lastmod&&l&&l.lastmod?(e.lastmod=parseInt(e.lastmod,10),f=l.lastmod===e.lastmod):!e.lastmod&&l&&l.lastmod?e.lastmod=l.lastmod:e.lastmod=o.lastmod;if(!l||!l.data){a("["+i+" controller] Resource or resource data is not available in storage adapter: type "+e.type+", url "+e.url),n.storage.create(e,s);return}if(!(parseInt(l.lifetime,10)!==-1&&f&&e.version===l.version&&l.expires>r)){a("["+i+" controller] Resource is outdated and needs update: type "+e.type+", url "+e.url),n.storage.update(e,s);return}a("["+i+" controller] Resource is up to date: type "+e.type+", url "+e.url),t=l.data,t&&u(e,t)})},c=function(e,t){var n=0,r=e.length,i=null;s.init(r,t);for(n=0;n<r;n+=1)i=e[n],i&&i.url&&l(i)},h=function(e){var t=[],n,r=0,i,s,o=e.length;for(r=0;r<o;r+=1)i=e[r],s=i.group,s||(s=0),t[s]?n=t[s]:n=t[s]=[],n.push(i);return t},p=function(e,t,n){var r=e.length,i;n||(n=0);while(!e[n]&&n<r)n+=1;if(n>=r){t();return}i=e[n],c(i,function(){p(e,t,n+1)})};a("["+i+" controller] Load resource function called: resources count "+e.length),p(h(e),f(t))},init:function(e,t){var r=this,s;if(r.initialized){e(s);return}e=f(e),a("["+i+" controller] Cache initializing and checking for storage adapters"),s=new n.cache.storage.controller(function(t){r.storage=t,e(t)},t)}},n.cache.controller=l}(window,document,window.app||{}),function(e,t,n,r){"use strict";var i=n.helpers,s=i.utils,o=s.bind,u={};u=n.cache.controller,o(e,"load",function(){s.logTimerStart("Page css and js files loaded"),s.logTimerStart("Page images loaded");var n=e.baseurl||s.url(e.location.pathname).folder,r=0;u.init(function(e){u.load([{url:n+"css/app.css",type:"css"},{url:n+"js/lib.js",type:"js"},{url:n+"js/app.js",type:"js",group:1}],function(){s.logTimerEnd("Page css and js files loaded"),r+=1,r===2&&(t.getElementById("layer-loading").style.display="none")}),u.load([{url:n+"img/410x144/test-1.jpg",type:"img",node:{id:"image-1"}},{url:n+"img/410x144/test-2.jpg",type:"img",node:{id:"image-2"}},{url:n+"img/410x144/test-3.jpg",type:"img",node:{id:"image-3"}}],function(){s.logTimerEnd("Page images loaded")}),e.appCacheAdapter.open(function(){r+=1,r===2&&(t.getElementById("layer-loading").style.display="none")})})})}(window,document,window.app||{});