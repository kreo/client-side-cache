(function(e,q){function p(){e[g]||(e[g]={});return e[g]}var g="app",l;l=p();l.namespace=l.ns=function(m,c){if(m){m=String(m);var h=m.split("."),d=h.length,a=e[g],b;a||(e[g]={});if(!h)return!1;for(b=0;b<d;b+=1)a[h[b]]||(a[h[b]]={}),b===d-1&&c!==q&&(a[h[b]]=c),a=a[h[b]];return a}return!1};e[g]=l;e.getNamespace=e.getNs=p})(window);
(function(e,q){function p(){if(!(this instanceof p))return new p;this.m=[];this.r=null;this.f=!1}p.prototype=p.fn={add:function(g){this.f?g(this.r):this.m.push(g)},flush:function(g){if(!this.f)for(this.r=g,this.f=!0;this.m[0];)this.m.shift()(g)}};e.ns("helpers.queue",p)})(window.getNs());
(function(e,q,p,g){var l=function(){var e=[];return{isString:function(c){return"string"===typeof c||c instanceof String},isFunction:function(c){var h=!1;return h=Object.prototype.toString?"[object Function]"===Object.prototype.toString.call(c):"function"===typeof c||c instanceof Function},isArray:function(c){var h=Array.isArray,d=Object.prototype.toString;l.isArray=h&&"function"===typeof h?function(a){return h(a)}:d&&"function"===d?function(a){return"[object Array]"===d.call(a)}:function(a){return!!a&&
!!a.sort&&"function"===typeof a.sort};return l.isArray(c)},inArray:function(c,h,d){l.inArray=Array.prototype.indexOf?function(a,b,f){return e.indexOf.call(b,a,f)}:function(a,b,f){var n=b.length,u=0;if(f)return b[f]&&b[f]===a?f:-1;for(u=0;u<n;u+=1)if(b[u]===a)return u;return-1};return l.inArray(c,h,d)},callback:function(c){l.isFunction(c)||(c=function(){return g});return c},url:function(c){if(l.isString(c)){var h=q.createElement("a"),d;h.href=c;d=h.pathname.match(/\/([^\/?#]+)$/i);return{source:c,
protocol:h.protocol,host:h.hostname,port:h.port,query:h.search,file:d?d[1]:"/",hash:h.hash,path:h.pathname.replace(/^([^\/])/,"/$1"),extension:function(a){a=a.split(".");return a.length?a[a.length-1]:!1}(c),folder:function(){var a=c.lastIndexOf("/");return c.substr(0,a+1)}()}}},trim:function(c){if(!l.isString(c))return c;l.isFunction(String.prototype.trim)||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});return c.trim()}}}();p.ns("helpers.utils",l)})(window,document,window.getNs());
(function(e,q,p,g){p.namespace("helpers.console",{})})(window,document,window.getNs());
(function(e,q,p){var g=function(){var e=q.helpers.utils;return{getXhr:function(){for(var e=null,c=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],h=c.length,d=0,d=0;d<h;d+=1){try{e=c[d]()}catch(a){continue}break}return e},xhr:function(m,c,h,d){var a=g.getXhr(),b,f="GET";c=e.callback(c);if(a)if(m){d!==p?f="POST":d=null;h===p&&(h=!0);b=function(){if(4===
a.readyState&&(200<=a.status&&400>a.status||0===a.status))try{var b=a.responseText;b?c(b):c(!1)}catch(f){c(!1)}else 4===a.readyState&&c(!1)};a.open(f,m,h);try{a.onreadystatechange!==p?a.onreadystatechange=b:a.onload!==p&&(a.onload=b)}catch(n){}a.send(d)}else c(!1);else c(!1)}}}();q.namespace("helpers.ajax",g)})(window,window.getNs());
(function(e,q,p,g){var l=function(){return{on:function(g,c,h){l.on="function"===typeof e.addEventListener?function(d,a,b){d.addEventListener(a,b,!1)}:"function"===typeof q.attachEvent?function(d,a,b){d.attachEvent("on"+a,b)}:function(d,a,b){d["on"+a]=b};l.on(g,c,h)},off:function(g,c,h){l.off="function"===typeof e.removeEventListener?function(d,a,b){d.removeEventListener(a,b,!1)}:"function"===typeof q.detachEvent?function(d,a,b){d.detachEvent("on"+a,b)}:function(d,a){d["on"+a]=null};l.off(g,c,h)}}}();
p.namespace("helpers.events",l)})(window,document,window.getNs());(function(e,q,p,g){var l=function(){var m=null,c=e.JSON;return{getJson:function(){null===m&&c&&c.stringify&&(m=c);return m},jsonToString:function(c,d,a){var b=!1;null===m&&(m=l.getJson());m&&(m.stringify&&c!==g)&&(b=m.stringify(c,d,a));return b},jsonToObject:function(c,d){var a=!1;null===m&&(m=l.getJson());m&&(m.parse&&c!==g)&&(a=m.parse(String(c),d));return a}}}();p.namespace("helpers.json",l)})(window,document,window.getNs());
(function(e,q,p,g){var l=function(){function l(){a===g&&(n(e,"online",l),n(e,"offline",l));a=q.onLine!==g?!!q.onLine:!0}var c,h,d,a,b,f=(q.userAgent||q.vendor||e.opera).toLowerCase(),n=p.helpers.events.on;return{isWebkit:function(){c===g&&(c=null!==f.match(/(webkit)/));return c},isMsie:function(){d===g&&(d=null!==f.match(/(msie)/));return d},isOpera:function(){h===g&&(h=null!==f.match(/(opera)/));return h},isOnline:function(){a===g&&l();return a},hasCanvas:function(){if(b===g){var a=document.createElement("canvas");
b=!(!a.getContext||!a.getContext("2d"))}return b}}}();p.ns("helpers.client",l)})(window,window.navigator,window.getNs());
(function(e,q,p){function g(g,c){c&&(c.dom?g=c.dom:c.id&&(g=e.getElementById(c.id)));return g}var l=function(){var m=q.helpers,c=m.utils,h=m.client,d=[],a=[],b=[],f=[],n=e.getElementsByTagName("head")[0];return{nuke:function(){d=[];a=[];b=[];f=[]},createDomNode:function(b,a){var f=e.createElement(b),n;if(a)for(n in a)a.hasOwnProperty(n)&&f.setAttribute(n,a[n]);return f},getAttribute:function(b,a){return b.getAttribute(a)},setAttribute:function(b,a,f){b.setAttribute(a,f)},appendCss:function(b,a,f,
s,k){if(-1===c.inArray(b,d)||k){var r=null,t=!1,v,m,r=g(r,s);if(null!==a){r||(r=l.createDomNode("style",{type:"text/css"}),r.className="lazyloaded");r.onerror=function(){f(!1)};s||n.appendChild(r);try{v=e.createTextNode(a),r.appendChild(v)}catch(p){r.styleSheet.cssText=a}finally{f(!0)}}else null!==b&&(r||(r=l.createDomNode("link",{rel:"stylesheet",type:"text/css"}),r.className="lazyloaded"),r.onerror=r.error=function(){r.onload=r.load=null;t=!0;window.clearTimeout(m);f(!1)},s||n.appendChild(r),h.isMsie()||
h.isOpera()?r.onload=r.load=function(){r.onerror=r.error=null;t=!0;window.clearTimeout(m);f(!0)}:f(!0),r.href=b,m=window.setTimeout(function(){t||f(!1)},4E3));d.push(b)}else f(!0)},appendJs:function(b,f,d,s,k){if(-1===c.inArray(b,a)||k){k=l.createDomNode("script");var h=e.getElementsByTagName("script")[0],t=!1,v=!1,m;(k=g(k,s))?(k.type="text/javascript",k.className="lazyloaded",k.async=!0,k.onreadystatechange=k.onload=function(){v||this.readyState&&"complete"!==this.readyState&&"loaded"!==this.readyState||
(this.onreadystatechange=this.onload=null,t=v=!0,window.clearTimeout(m),a.push(b),d(!0))},k.onerror=function(){this.onload=this.onreadystatechange=this.onerror=null;window.clearTimeout(m);t=!0;d(!1)},s||(h?h.parentNode.insertBefore(k,h):n.appendChild(k)),f&&!v?(k.textContent?k.textContent=f:k.nodeValue?k.nodeValue=f:k.text=f,t=v=!0):null!==b&&(k.src=b),v&&(a.push(b),t=!0,d(!0)),t||(m=window.setTimeout(function(){v||d(!1)},5E3))):d(!1)}else d(!0)},appendImg:function(a,f,n,d){var k=null;(k=g(k,d))||
(k=new Image);k.onerror=function(){k.onload=k.onerror=null;n(!1)};k.onload=function(){k.onload=k.onerror=null;n(!0)};f?k.src=f:a&&(k.src=a);if(k.complete&&k.naturalWidth!==p)k.onload();b.push(a)},appendHtml:function(b,a,n,d){var k=g(null,d);if(k){if(a)try{k.innerHTML=a,d.id&&h.isMsie()&&e.styleSheets[0].addRule("#"+d.id+":after",'content: " ";')}catch(c){k.innerText=a}n(!0);f.push(b)}else n(!1)}}}();q.ns("helpers.dom",l)})(document,window.getNs());
(function(e,q,p){function g(b,a,d){var c=function(a){d(!1)};if("."===a[0]||""===a[0])a=a.slice(1);a[0]?b.getDirectory(a[0],{create:!0},function(b){a.length?g(b,a.slice(1),d):d(!0)},c):d(!0)}function l(a,b,c){b=b.split("/");var e=b.length,h="",s=0;c=d(c);if(e){for(s=0;s<e-1;s+=1)h=h+b[s]+"/";g(a.root,h.split("/"),c)}else c(!0)}function m(b){if(!(this instanceof m))return new m(b);this.adapter=null;this.type=c;this.size=52428800;this.init(b)}var c="fileSystem";p=q.helpers;var h=p.json,d=p.utils.callback,
a=null,b=e.requestFileSystem||e.webkitRequestFileSystem||e.moz_requestFileSystem;m.prototype=m.fn={isSupported:function(){null===a&&(a=!!b&&(!!e.Blob||!!e.BlobBuilder)&&e.FileReader);return a},open:function(f){var n=this,c=n.adapter,g=function(b){f(!1)};f=d(f);a?null===c?(e.requestFileSystem=b,e.requestFileSystem(e.TEMPORARY,n.size,function(b){c=n.adapter=b;try{n.create("test-item",h.jsonToString({test:"test-content"}),function(b){b?n.remove("test-item",function(){f(c)}):f(!1)})}catch(a){f(!1)}},
g)):f(c):f(!1)},create:function(b,n,c){c=d(c);if(b&&a){var g=this.adapter,e=function(b){c(!1,b)};l(g,b,function(){g.root.getFile(b,{create:!0},function(b){b.createWriter(function(b){var a;b.onwriteend=function(){c(!0)};b.onerror=e;try{Blob?(a=new Blob([n],{type:"text/plain"}),b.write(a)):BlobBuilder&&(a=new BlobBuilder,a.append(n),b.write(a.getBlob("application/json")))}catch(f){e(f)}},e)},e)})}else c(!1)},read:function(b,n){n=d(n);if(b&&a){var c=this.adapter,g=function(b){n(!1,b)};l(c,b,function(){c.root.getFile(b,
{create:!1},function(b){b.file(function(b){var a=new FileReader;a.onloadend=function(){n(this.result)};a.onerror=g;a.onabort=g;a.readAsText(b)},g)},g)})}else n(!1)},update:function(b,a,d){this.create(b,a,d)},remove:function(b,n){n=d(n);if(b&&a){var c=this.adapter,g=function(b){n(!1,b)};l(c,b,function(){c.root.getFile(b,{create:!1},function(b){b.remove(function(){n(!0)},g)},g)})}else n(!1)},init:function(b){return this.isSupported()?(b&&b.size&&(this.size=b.size),this):!1}};q.ns("cache.storage.adapter."+
c,m)})(window,window.getNs());
(function(e,q,p){function g(d){if(!(this instanceof g))return new g(d);this.adapter=null;this.type=l;this.dbName="cache";this.dbVersion="1.0";this.dbTable="offline";this.dbDescription="offline cache";this.dbKey="key";this.init(d)}var l="indexedDatabase",m=q.helpers.utils.callback,c=null,h=e.indexedDB||e.webkitIndexedDB||e.mozIndexedDB||e.OIndexedDB||e.msIndexedDB;g.prototype=g.fn={isSupported:function(){null===c&&(c=!!h);return c},create:function(d,a,b){b=m(b);if(d&&c){var f=this.dbTable,n=this.adapter.transaction([f],
"readwrite");d=n.objectStore(f).put({key:d,content:a});n.onerror=function(a){b(!1,a)};d.onerror=function(a){b(!1,a)};d.onsuccess=function(){b(!0)}}else b(!1)},read:function(d,a){a=m(a);if(d&&c){var b=this.dbTable,f=this.adapter.transaction([b],"readonly"),b=f.objectStore(b).get(d);f&&b?(f.onerror=function(b){a(!1,b)},b.onerror=function(b){a(!1,b)},b.onsuccess=function(b){b.target.result&&b.target.result.content?a(b.target.result.content):a(!1)}):a(!1)}else a(!1)},update:function(d,a,b){this.create(d,
a,b)},remove:function(d,a){a=m(a);if(d&&c){var b=this.dbTable,f=this.adapter.transaction([b],"readwrite"),b=f.objectStore(b).put({key:d,content:""});f.onerror=function(b){a(!1,b)};b.onerror=function(b){a(!1,b)};b.onsuccess=function(){a(!0)}}else a(!1)},open:function(d,a){a||(a=!1);d=m(d);var b=this,f=null,c=null,g=null,l=b.dbName,q=b.dbTable,s=function(a){a||d(!1);b.create("test-item",'{test: "test-content"}',function(f){f?b.remove("test-item",function(){d(a)}):d(!1)})},k,r,t,v,C;if(null===b.adapter)if(f=
h){e.webkitIndexedDB!==p&&(e.IDBTransaction=e.webkitIDBTransaction,e.IDBKeyRange=e.webkitIDBKeyRange);k=function(a){a.createIndex(b.dbKey,b.dbKey,{unique:!0});a.createIndex("content","content",{unique:!1})};r=function(a){var f=c.result,e,h;b.adapter=f;b.dbVersion===f.version||!f.setVersion&&"function"!==typeof f.setVersion?(b.adapter=f,s(f)):(g=a.currentTarget.result.setVersion(b.dbVersion),g.onfailure=function(b){d(!1)},g.onsuccess=function(a){e=c.result;try{h=e.createObjectStore(q,{keyPath:b.dbKey}),
k(h)}catch(f){d(!1)}})};t=function(a){a=c.result.createObjectStore(q,{keyPath:b.dbKey});k(a)};v=function(f){a||b.open(d,!0);d(!1)};C=function(b){d(!1)};if(a)try{c=f.open(l,b.dbVersion)}catch(w){c=f.open(l)}else c=f.open(l);c.onsuccess=r;c.onupgradeneeded=t;c.onerror=v;c.onblocked=C}else d(!1);else s(b.adapter)},init:function(c){return this.isSupported()?(c&&(c.name&&(this.dbName=String(c.name)),c.version&&(this.dbVersion=parseInt(c.version,10)),c.table&&(this.dbTable=c.table),c.description&&(this.dbDescription=
String(c.description)),c.key&&(this.dbKey=c.key)),this):!1}};q.ns("cache.storage.adapter."+l,g)})(window,window.getNs());
(function(e,q,p){function g(a,b,f,c,d,g){!g&&a?a.transaction(function(a){a.executeSql(b,f,c,d)}):g?g.executeSql(b,f,c,d):d(null,{code:0,message:m+" isn't available"})}function l(a){if(!(this instanceof l))return new l(a);this.adapter=null;this.type=m;this.dbName="cache";this.dbVersion="1.0";this.dbDescription="resource cache";this.dbTable="websql";this.dbSize=4194304;this.init(a)}var m="webSqlDatabase",c=q.helpers.utils.callback,h=null,d=e.openDatabase;l.prototype=l.fn={isSupported:function(){null===
h&&(h=!!d);return h},create:function(a,b,f){f=c(f);a&&h?g(this.adapter,"INSERT INTO "+this.dbTable+" (key, content) VALUES (?,?);",[a,b],function(){f(!0)},function(b,a){f(!1,a,{transaction:b})}):f(!1)},read:function(a,b){b=c(b);a&&h?g(this.adapter,"SELECT content FROM "+this.dbTable+" WHERE key=?;",[a],function(a,c){var d=!1;c&&(c.rows&&1===c.rows.length)&&(d=c.rows.item(0).content);b(d,null,{transaction:a})},function(a,c){b(!1,c,{transaction:a})}):b(!1)},update:function(a,b,f){f=c(f);a&&h?g(this.adapter,
"UPDATE "+this.dbTable+" SET content = ?  WHERE key=?;",[b,a],function(){f(!0)},function(b,a){f(!1,a,{transaction:b})}):f(!1)},remove:function(a,b){b=c(b);a&&h?g(this.adapter,"DELETE FROM "+this.dbTable+" WHERE key = ?;",[a],function(){b(!0)},function(a,c){b(!1,c,{transaction:a})}):b(!1)},open:function(a){a=c(a);if(h){var b=this,f=b.adapter,n,l=function(c){c||a(!1);n=function(f){f?b.remove("test-item",function(){a(c)}):a(!1)};b.read("test-item",function(a){a?b.update("test-item",'{test: "test-content"}',
n):b.create("test-item",'{test: "test-content"}',n)})},m=function(a,c){g(a,"CREATE TABLE IF NOT EXISTS "+b.dbTable+"(id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, key TEXT NOT NULL UNIQUE, content TEXT NOT NULL);",[],function(){l(b.adapter)},function(b){l(!1)},c)},p=function(b){m(null,b)},s=function(b){a(!1)};try{if(null===f&&b.isSupported())if(b.adapter=f=d(b.dbName,"",b.dbDescription,b.dbSize),String(f.version)!==String(b.dbVersion)&&f.changeVersion&&"function"===typeof f.changeVersion)try{f.changeVersion(f.version,
b.dbVersion,p,s)}catch(k){a(!1)}else f=e.openDatabase(b.dbName,b.dbVersion,b.dbDescription,b.dbSize),m(f);else b.isSupported()&&l(f)}catch(r){a(!1)}}else a(!1)},init:function(a){return this.isSupported()?(a&&(a.description&&(this.dbDescription=a.description),a.name&&(this.dbName=a.name),a.size&&(this.dbSize=a.size),a.table&&(this.dbTable=a.table),a.version&&(this.dbVersion=String(a.version))),this):!1}};q.ns("cache.storage.adapter."+m,l)})(window,window.getNs());
(function(e,q,p){function g(b){b=h(b);switch(b){case "local":b="localStorage";break;case "session":b="sessionStorage";break;default:b="localStorage"}return b}function l(b){if(!(this instanceof l))return new l(b);this.adapter=null;this.type=m;this.lifetime="local";this.asynch=!0;this.init(b)}var m="webStorage",c=q.helpers.utils,h=c.trim,d=c.callback,a=null;l.prototype=l.fn={isSupported:function(){var b=g(this.lifetime);if(null===a)try{a=!!e[b]&&!!e[b].getItem}catch(c){a=!1}return a},create:function(b,
a,c){var g=this,e=!0,h=function(b){if(g.asynch)c(b);else return b};c=d(c);if(!b)return h(!1);try{g.adapter.setItem(b,a)}catch(l){e=!e}return h(e)},read:function(b,a){var c=this,g,e=!0,h=function(b){if(c.asynch)a(b);else return b};a=d(a);if(!b)return h(!1);try{e=(g=c.adapter.getItem(b))?g:!1}catch(l){e=!e}return h(e)},update:function(b,a,c){if(this.asynch)this.create(b,a,c);else return this.create(b,a,c)},remove:function(b,a){var c=this,g=!0,e=function(b){if(c.asynch)a(b);else return b};a=d(a);if(!b)return e(!1);
try{c.adapter.removeItem(b)}catch(h){g=!g}return e(g)},open:function(b){var a=this,c=a.adapter,h=g(a.lifetime),l,m,s=function(c){if(a.asynch)b(c);else return c};b=d(b);if(null===c)try{if(c=a.adapter=e[h],a.asynch)a.create("test-item",'{test: "test-content"}',function(d){d?a.remove("test-item",function(){b(c)}):b(!1)});else{if(l=a.create("test-item",'{test: "test-content"}'))if(m=a.remove("test-item"))return c;return!1}}catch(k){return s(!1)}else if(a.isSupported())return s(c)},init:function(b){return this.isSupported()?
(b&&(b.lifetime&&(this.lifetime=h(String(b.lifetime))),b.asynch!==p&&(this.asynch=!!b.asynch)),this):!1}};q.ns("cache.storage.adapter."+m,l)})(window,window.getNs());
(function(e,q,p,g){function l(b,a){a.isLoaded||(a.isLoaded=!0,a.progressCallback(100),e.setTimeout(function(){b()},a.delay))}function m(b){if(!(this instanceof m))return new m(b);this.adapter=null;this.type=c;this.isLoaded=!1;this.delay=0;this.opened=!0;this.message="New version available. Update page?";this.init(b)}var c="applicationCache",h=p.helpers,d=h.dom,a=h.events.on,b=h.utils.callback,f=null,n=q.getElementsByTagName("html")[0],u=e.applicationCache;m.prototype=m.fn={isSupported:function(){null===
f&&(f=!!u&&!!d.getAttribute(n,"manifest"));return f},open:function(c,f){var d=this,k=d.adapter,h=0,n,m;d.opened=!0;c=b(c);f&&f.progress&&(n=f.progress);n=d.progressCallback=b(n);if(d.isSupported()&&null!==k){m=function(){try{k.swapCache()}catch(b){}confirm(d.message)?e.location.reload(!0):l(c,d);return!1};a(k,"noupdate",function(){l(c,d);return!1});a(k,"downloading",function(){h=0;return!1});a(k,"progress",function(b){var a=0;d.delay=500;h+=1;a=b&&b.lengthComputable!==g?Math.round(100*b.loaded/b.total):
Math.round(100*h/20);n(a);return!1});a(k,"cached",function(){l(c,d);return!1});a(k,"updateready",function(){m()});a(k,"obsolete",function(){e.location.reload(!0);return!1});a(k,"error",function(){l(c,d);return!1});switch(k.status){case k.UNCACHED:l(c,d);break;case k.IDLE:l(c,d);break;case k.UPDATEREADY:m();break;case k.OBSOLETE:l(c,d)}a(e,"online",function(){try{k.update()}catch(b){}});e.setTimeout(function(){d.isLoaded||l(c,d)},12E3)}else l(c,d)},init:function(b){this.isSupported()&&(null===this.adapter&&
(this.adapter=u),b&&(b.message&&(this.message=String(b.message)),b.delay!==g&&(this.delay=parseInt(b.delay,10))));return this}};p.ns("cache.storage.adapter."+c,m)})(window,document,window.getNs());
(function(e,q,p,g){function l(b,a,c){c.timeoutXhr=e.setTimeout(function(){a(!1)},4E3);C(b,function(b){e.clearTimeout(c.timeoutXhr);delete c.timeoutXhr;b?a(b):a(!1)})}function m(b){var a=null;try{a=k.jsonToObject(b)}catch(c){}return a}function c(b,a,c){if(E){var d=q.createElement("canvas"),f,e=new Image,h=null,k=0,l=0;c||(c="jpeg");e.onerror=function(){e.onload=e.onerror=null;a()};e.onload=function(){e.onload=e.onerror=null;k=d.height=e.height;l=d.width=e.width;f=d.getContext("2d");f.fillStyle="rgba(50, 50, 50, 0)";
f.fillRect(0,0,l,k);f.drawImage(e,0,0);h=d.toDataURL("image/"+c);a(h)};x&&(e.src="");e.src=b;if(e.complete&&e.naturalWidth!==g)e.onload()}else a(!1)}function h(b){var a=b.data,c=b.url;"css"===b.type&&(c=s.url(c),c=c.folder,a=a.replace(/url\(\../g,"url("+c+".."),a=a.replace(/url\(\'../g,"url('"+c+".."),a=a.replace(/url\(\"../g,'url("'+c+".."),b.data=a);return b}function d(b,a){return{ajax:b.ajax,data:b.data,expires:(new Date).getTime()+(b.lifetime||a.lifetime),group:b.group!==g?b.group:a.group,lastmod:b.lastmod||
a.lastmod,lifetime:b.lifetime!==g?b.lifetime:a.lifetime,type:b.type||a.type,version:b.version||a.version}}function a(b,a,d){var f=b.type,e=b.url,g=b.data;b.ajax?"img"===f?c(e,a):l(e,a,b):g?a(g):d(!1)}function b(b){return B&&B[b]?!!B[b]:!1}function f(b,a){var c=null,d,e;b&&b.length?(d=b[0].type,e=b.slice(1),A[d]?c=new A[d](D):f(e,a),c&&c.isSupported()?c.open(function(d){d?(B=b[0],a(c)):f(e,a)}):f(e,a)):a(!1)}function n(b,a,c){var d=null,e=0,g;if(c)try{A[c]?(d=new A[c](D))&&d.isSupported()?d.open(function(f){if(f){g=
a.length;for(e=0;e<g;e+=1)a[e].type===c&&(B=a[e]);B?b(d):n(b,a)}else n(b,a)}):n(b,a):n(b,a)}catch(h){n(b,a)}else f(a,b)}function u(b,a){if(!(this instanceof u))return new u(b,a);this.isEnabled=!0;this.appCacheAdapter=this.adapter=null;this.adapters={types:F,defaults:D};this.resources={defaults:G};this.init(b,a)}var y=p.helpers,z=y.client,s=y.utils,k=y.json,y=y.ajax,r=s.isArray,t=s.callback,v=k.getJson(),C=y.xhr,w=s.trim,A=p.cache.storage.adapter,x=z.isWebkit(),E=z.hasCanvas(),F=[{type:"fileSystem",
css:!0,js:!0,html:!0,img:!0},{type:"indexedDatabase",css:!0,js:!0,html:!0,img:!0},{type:"webSqlDatabase",css:!0,js:!0,html:!0,img:!0},{type:"webStorage",css:!0,js:!0,html:!0,img:!0}],D={name:"localcache",table:"cache",description:"local resource cache",size:4194304,version:"1.0",key:"key",lifetime:"local",offline:!0},B=null,G={ajax:!0,lifetime:2E4,group:0,lastmod:(new Date).getTime(),type:"css",version:1};u.prototype=u.fn={create:function(c,f){f=t(f);if(c&&c.url){var e=this,g=c.url,l=c.type;a(c,function(a){if(a)if(c.data=
a,c=h(c),null!==e.adapter&&b(l)){a=k.jsonToString(g);var n=d(c,e.resources.defaults),m=k.jsonToString(n);c.expires=n.expires;c.version=n.version;try{e.adapter.create(a,m,function(b){b?f(c):f(!1)})}catch(t){f(c)}}else f(c);else f(c)},f)}else f(!1)},read:function(a,c){c=t(c);if(a&&a.url){var d=this,f=a.url,e=a.type;if(null!==this.adapter&&b(e))try{d.adapter.read(k.jsonToString(f),function(b){b?(a=m(b))?(a.url=f,c(a,!0)):d.remove({url:f,type:e},function(){c(!1)}):c(!1)})}catch(g){l(f,function(b){a.data=
b;c(a,!0)},a)}else c(a)}else c(!1)},update:function(c,f){f=t(f);if(c&&c.url){var e=this,g=c.url,l=c.type;a(c,function(a){if(a)if(c.data=a,c=h(c),null!==e.adapter&&b(l)){a=k.jsonToString(g);var n=d(c,e.resources.defaults),m=k.jsonToString(n);c.expires=n.expires;c.version=n.version;try{e.adapter.update(a,m,function(b){b?f(c):f(!1)})}catch(t){f(c)}}else f(c);else e.read(c,function(b){b&&b.data?(c.data=b.data,f(c)):f(!1)})},f)}else f(!1)},remove:function(a,c){c=t(c);if(a&&a.url){var f=a.url,d=a.type;
null!==this.adapter&&b(d)?this.adapter.remove(k.jsonToString(f),function(b){b?c(a):c(!1)}):c(a)}else c(!1)},init:function(b,a){var c=this,f=!1,d,e,h,k;b=t(b);a&&a.isEnabled!==g&&(c.isEnabled=!!a.isEnabled);if(c.isEnabled&&v){if(a){if(a.adapters){d=a.adapters;if(d.types&&r(d.types)){e=d.types;h=e.length;for(k=0;k<h;k+=1)e[k].css===g&&(e[k].css=!0),e[k].js===g&&(e[k].js=!0),e[k].img===g&&(e[k].img=!0),e[k].html===g&&(e[k].html=!0);c.adapters.types=e}d.defaults&&(e=d.defaults,h=c.adapters.defaults,e.name&&
(h.name=w(String(e.name))),e.table&&(h.table=w(String(e.table))),e.description&&(h.description=w(String(e.description))),e.size&&(h.size=parseInt(e.size,10)),e.version&&(h.version=w(String(e.version))),e.key&&(h.key=w(String(e.key))),e.lifetime&&(h.lifetime=w(String(e.lifetime))),e.offline!==g&&(h.offline=!!e.offline));d.preferredType&&(f=w(String(d.preferredType)))}a.resources&&(d=a.resources,d.defaults&&(d=d.defaults,e=c.resources.defaults,d.ajax!==g&&(e.ajax=!!d.ajax),d.lifetime!==g&&(e.lifetime=
parseInt(d.lifetime,10)),d.group!==g&&(e.group=parseInt(d.group,10)),d.lastmod!==g&&(e.lastmod=parseInt(d.lastmod,10)),d.type&&(e.type=w(String(d.type))),d.group!==g&&(e.version=parseFloat(d.version)),d.loaded&&(e.loaded=t(d.loaded))))}n(function(a){a||(c.isEnabled=!1);c.adapter=a;b(c)},c.adapters.types,f);c.adapters.defaults.offline&&(A.applicationCache&&!c.appCacheAdapter)&&(c.appCacheAdapter=new A.applicationCache(D))}else b(c)}};p.ns("cache.storage.controller",u)})(window,document,window.getNs());
(function(e,q){function p(b){var d=a(b.type);if("js"!==d||"css"!==d||"html"!==d||"img"!==d||"custom"!==d){switch(c.url(b.url).extension){case "js":b="js";break;case "css":b="css";break;case "html":b="html";break;case "jpg":case "jpeg":case "png":b="img";break;default:b="custom"}d=b}return d}function g(b,a){if(!(this instanceof g))return new g(b,a);this.storage=null;this.init(b,a)}var l=e.helpers,m=l.dom,c=l.utils,h=l.client,d=c.isArray,a=c.trim,b=c.callback;g.prototype=g.fn={load:function(c,e){var g=
this,l=(new Date).getTime(),z=function(){var b=0,a=0,c=null;return{init:function(d,e){c=e;b=d;a=0},loaded:function(){a+=1;a===b&&c()}}}(),s=function(b,a,c){var d=b.url,e=function(){b.loaded(b);z.loaded()},f=b.node||null;c=!!c;switch(b.type){case "js":m.appendJs(d,a,e,f,c);break;case "css":m.appendCss(d,a,e,f,c);break;case "img":m.appendImg(d,a,e,f,c);break;case "html":m.appendHtml(d,a,e,f,c);break;default:e()}},k=function(a){var c=a.data||null,d=function(a,b){a&&a.data?s(a,a.data,b):s(a,null,b)},
e=g.storage,f=e.resources.defaults;a.ajax=a.ajax!==q?!!a.ajax:f.ajax;a.loaded=a.loaded!==q?b(a.loaded):b(f.loaded);e.read(a,function(b){if(b&&b.data){var f=a,k=g.storage.resources.defaults,m=parseInt(b.lifetime,10),n=b.version,t=b.lastmod?b.lastmod:0,p=!1,r,x=f.lastmod?f.lastmod:0,p=!0;r=!1;f.version=r=f.version!==q?parseFloat(f.version):k.version;f.group=f.group!==q?parseFloat(f.group):k.group;x&&t?(f.lastmod=parseInt(x,10),p=t===f.lastmod):!x&&t?x=t:x||(x=k.lastmod);p=p&&r===n;r=0!==m&&(-1!==m&&
p&&b.expires>l||-1===m&&p);f.lastmod=x;f.isValid=r;a=f;a.isValid||!h.isOnline()?(c=b.data)&&s(a,c):e.update(a,d)}else e.create(a,d)})},r=function(b,c){var d=0,e=b.length,f=null;z.init(e,c);for(d=0;d<e;d+=1)(f=b[d])&&f.url&&(f.url=a(f.url),f.type=p(f),k(f))},t=function(b,a,c){var d=b.length;for(c||(c=0);!b[c]&&c<d;)c+=1;c>=d?a(g):(d=b[c],r(d,function(){t(b,a,c+1)}))};(function(a,c){a&&d(a)||(a=[]);for(var f=a,g=[],k,h=0,l,m=f.length,h=0;h<m;h+=1)l=f[h],(k=l.group)||(k=0),k=g[k]?g[k]:g[k]=[],k.push(l);
a=g;c=b(e);t(a,c)})(c,e)},remove:function(c,e){var g=this.storage,h=function(b,c){var d=b.length,e,f,h=function(b,a){b===d-1&&c()};if(d)for(e=0;e<d;e+=1)(f=b[e])&&f.url&&(f.url=a(f.url),f.type=p(f),g.remove(f,h(e,f.url)));else c()};(function(a,c){a&&d(a)||(a=[]);c=b(e);h(a,c)})(c,e)},init:function(a,c){var d=this;a=b(a);e.cache.storage.controller(function(b){d.storage=b;a(b)},c);return d}};e.ns("cache.controller",g)})(window.getNs());
(function(e,q,p){function g(a){this.storage=this.controller=null;this.params=a;this.queue=new d;this.timeout=this.interval=this.calls=0}function l(a){var d=null,e=c.length,h;a||(a=z);if(b)for(h=0;h<e;h+=1)f(c[h].params)===f(a)&&(d=c[h]);d||(d=new g(a),c.push(d));return d}function m(a,b,c){var d=l(a),f,g,h,m=function(){f=d.interval;e.clearInterval(f);f=e.setInterval(function(){d.timeout=g=d.timeout+u;h=d.storage;d.controller&&(h&&(h.adapter||!h.isEnabled))&&(e.clearInterval(f),d.queue.flush());g>y&&
(e.clearInterval(f),c())},u)};d?d.storage?b(d):(d.queue.add(function(){b(d)}),d.calls+=1,1===d.calls?d.controller=new q.cache.controller(function(a){d.storage=a;d.controller?d.queue.flush():m()},a):m()):c()}var c=[],h=q.helpers,d=h.queue;p=h.utils;var h=h.json,a=p.isArray,b=h.getJson(),f=h.jsonToString,n=p.callback,u=15,y=5E3,z={};p=function(){return{load:function(b,c,d){c=n(c);m(d,function(e){a(b)?e.controller.load(b,c):"applicationCache"===b?(e=e.storage)&&e.appCacheAdapter?e.appCacheAdapter.open(c,
d):c(!1):c(!1)},function(){c(!1)});return this},remove:function(b,c,d){c=n(c);m(d,function(d){a(b)?d.controller.remove(b,c):c(!1)},function(){c(!1)});return this},setup:function(a){a&&(z=a);return this}}}();q.ns("cache.load",p.load);q.ns("cache.remove",p.remove);q.ns("cache.setup",p.setup)})(window,window.getNs());
