function(e,m){function t(){e[c]||(e[c]={});return e[c]}var c="app",f;f=t();f.namespace=function(f,q){if(f){f=String(f);var l=f.split("."),s=l.length,n=e[c],d;n||(e[c]={});if(!l)return!1;for(d=0;d<s;d+=1)n[l[d]]||(n[l[d]]={},d===s-1&&q&&(n[l[d]]=q)),n=n[l[d]];return n}return!1};e[c]=f;e.getNamespace=e.getNs=t})(window);(function(e,m,t){e.onerror=function(c,e,r){m.helpers.utils.warn(c+"\nurl: "+e+"\nline: "+r);return!0}})(window,window.getNamespace());
(function(e,m){function t(){this.methods=[];this.response=null;this.flushed=!1}t.prototype=t.fn={add:function(c){this.flushed?c(this.response):this.methods.push(c)},flush:function(c){if(!this.flushed)for(this.response=c,this.flushed=!0;this.methods[0];)this.methods.shift()(c)}};e.namespace("helpers.queue",t)})(window.getNamespace());
(function(e,m,t,c){var f=function(){var r=null,q=e.console!==c,l=q?e.console:null,s=q&&l.log!==c,n=q&&l.warn!==c,d=q&&l.time!==c&&l.timeEnd!==c,h=[];return{logToScreen:function(a){var b=m.getElementById("log"),k=m.createElement("p");a=m.createTextNode(a);b&&(k.appendChild(a),b.appendChild(k))},log:function(){var a=arguments;a.length&&(s&&l.log.apply(l,a),a=a[0],f.logToScreen(a))},warn:function(){var a=arguments,b;a.length&&(b=a[0],n?l.warn.apply(l,a):f.log(b),f.logToScreen(b))},logTimerStart:function(a){d&&
e.console.time(a)},logTimerEnd:function(a){d&&e.console.timeEnd(a)},callback:function(a){a&&"function"===typeof a||(a=function(){});return a},on:function(a,b,k){f.on="function"===typeof e.addEventListener?function(b,a,k){b.addEventListener(a,k,!1)}:"function"===typeof m.attachEvent?function(b,a,k){b.attachEvent("on"+a,k)}:function(b,a,k){b["on"+a]=k};f.on(a,b,k)},off:function(a,b,k){f.off="function"===typeof e.removeEventListener?function(b,a,k){b.removeEventListener(a,k,!1)}:"function"===typeof m.detachEvent?
function(b,a,k){b.detachEvent("on"+a,k)}:function(b,a){b["on"+a]=null};f.off(a,b,k)},getXhr:function(){for(var a=null,b=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],k=b.length,u=0,u=0;u<k;u+=1){try{a=b[u]()}catch(p){continue}break}return a},xhr:function(a,b,k,u){var p=f.getXhr(),g,d="GET";b=f.callback(b);if(p)if(a){u!==c?d="POST":u=null;
k===c&&(k=!0);g=function(){if(4===p.readyState&&(200<=p.status&&400>p.status||0===p.status))try{var a=p.responseText;a?b(a):b(!1)}catch(k){b(!1)}else 4===p.readyState&&b(!1)};p.open(d,a,k);try{p.onreadystatechange!==c?p.onreadystatechange=g:p.onload!==c&&(p.onload=g)}catch(h){p.onload=null,p.onload=g}p.send(u)}else b(!1);else b(!1)},getJson:function(){null===r&&e.JSON&&e.JSON.stringify&&(r=e.JSON);return r},jsonToString:function(a){var b=!1;null===r&&(r=f.getJson());r&&a&&(b=r.stringify(a));return b},
jsonToObject:function(a){var b=!1;null===r&&(r=f.getJson());r&&a&&(b=r.parse(a));return b},url:function(a){if(a){var b=m.createElement("a"),k;b.href=a;k=b.pathname.match(/\/([^\/?#]+)$/i);var u=b.protocol,p=b.hostname,g=b.port,c=b.search;k=k?k[1]:"/";var d=b.hash,b=b.pathname.replace(/^([^\/])/,"/$1"),h=a.lastIndexOf("/"),h=a.substr(0,h+1);return{source:a,protocol:u,host:p,port:g,query:c,file:k,hash:d,path:b,folder:h}}},queryString:function(){for(var a={},b=e.location.search.substring(1).split("&"),
k=b.length,u=0,d,g,u=0;u<k;u+=1)d=b[u].split("="),a[d[0]]===c?a[d[0]]=d[1]:"string"===typeof a[d[0]]?(g=[a[d[0]],d[1]],a[d[0]]=g):a[d[0]].push(d[1]);return a}(),sprintf:function(a){var b=1,k=arguments;return a.replace(/%s/g,function(){return b<k.length?k[b++]:""})},trim:function(a){if("string"!==typeof a||!(a instanceof String))return a;"function"!==typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});return a.trim()},isArray:function(a){var b=Array.isArray,
k=Object.prototype.toString;f.isArray=b&&"function"===typeof b?function(a){return b(a)}:k&&"function"===k?function(b){return"[object Array]"===k.call(b)}:function(b){return!!b.sort&&"function"===typeof b.sort};return f.isArray(a)},inArray:function(a,b,k){f.inArray=Array.prototype.indexOf?function(b,a,k){return h.indexOf.call(a,b,k)}:function(b,a,k){var d=a.length,c=0;if(k)return a[k]&&a[k]===b?k:-1;for(c=0;c<d;c+=1)if(a[c]===b)return c;return-1};return f.inArray(a,b,k)}}}();t.namespace("helpers.utils",
f)})(window,document,window.getNamespace());
(function(e,m,t,c){var f=function(){function f(){switch(parseInt(e.orientation,10)){case 0:E=J;break;case 180:E=J;break;case 90:E=K;break;case -90:E=K}}function q(){L||(H(e,"orientationchange",f),L=!0)}function l(){(d=null!==y.match(/(iphone|ipod|ipad)/))&&q()}function s(){B===c&&(H(e,"online",s),H(e,"offline",s));B=m.onLine!==c?!!m.onLine:!0}function n(){var b=m.connection||m.mozConnection||m.webkitConnection||{type:0,UNKNOWN:0,ETHERNET:1,WIFI:2,CELL_2G:3,CELL_3G:4},a=function(){C=b};b.onchange=
a;a()}var d,h,a,b,k,u,p,g,z,A,F,x,G,D,v,w,B,C,K="landscapeMode",J="portraitMode",E,I,M,L,N=m.userAgent||m.vendor||e.opera,y=N.toLowerCase(),H=t.helpers.utils.on;return{isiOS:function(){d===c&&l();return d},isWebkit:function(){h===c&&(h=null!==y.match(/(webkit)/));return h},isAndroid:function(){a===c&&(a=null!==y.match(/(android)/))&&q();return a},isBlackberry:function(){b===c&&(b=null!==y.match(/(blackberry)/))&&q();return b},isChrome:function(){u===c&&(u=null!==y.match(/(chrome)/));return u},isOpera:function(){k===
c&&(k=null!==y.match(/(opera)/));return k},isSafari:function(){p===c&&(p=null!==y.match(/(safari)/));return p},isFirefox:function(){g===c&&(g=null!==y.match(/(firefox)/));return g},isSeamonkey:function(){z===c&&(z=null!==y.match(/(seamonkey)/));return z},isCamino:function(){A===c&&(A=null!==y.match(/(camino)/));return A},isMsie:function(){F===c&&(F=null!==y.match(/(msie)/));return F},isiPad:function(){x===c&&(x=null!==y.match(/(ipad)/))&&q();return x},isiPhone:function(){G===c&&(G=null!==y.match(/(iphone)/))&&
q();return G},isMobile:function(){D===c&&(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(y)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(y.substr(0,
4))?(D=!0,q()):D=!1);return D},getBrowserVersion:function(){if(v===c){var b,a;(a=y.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i))&&null!==(b=N.match(/version\/([\.\d]+)/i))&&(a[2]=b[1]);v=a?a[2]:m.appVersion}return v},getiOSVersion:function(){if(w===c&&(d===c&&l(),d)){var b=m.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);w=[parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3]||0,10)]}return w},isOnline:function(){B===c&&s();return B},getNetworkConnection:function(){C===c&&n();return C},
isStandalone:function(){return m.standalone!==c&&m.standalone},isTouchDevice:function(){return!!("ontouchstart"in e)||e.navigator.msMaxTouchPoints},orientation:function(){return e.orientation?e.orientation:0},orientationMode:function(){E===c&&f();return E},hasRetinaDisplay:function(){return 2<=e.devicePixelRatio},hasCanvas:function(){if(I===c){var b=document.createElement("canvas");I=!(!b.getContext||!b.getContext("2d"))}return I},hideStatusbar:function(b){b||(b=0);e.clearTimeout(M);M=e.setTimeout(function(){0===
parseInt(e.pageYOffset,10)&&e.scrollTo(0,1)},b)}}}();t.namespace("helpers.client",f)})(window,window.navigator,window.getNamespace());
(function(e,m,t){function c(c,f){f&&(f.dom?c=f.dom:f.id&&(c=e.getElementById(f.id)));return c}var f=function(){var r=m.helpers,q=r.utils,l=r.client,s=[],n=[],d=[],h=[],a=e.getElementsByTagName("head")[0];return{_destroy:function(){s=[];n=[];d=[];h=[]},createDomNode:function(b,a){var d=e.createElement(b),c;if(a)for(c in a)a.hasOwnProperty(c)&&d.setAttribute(c,a[c]);return d},hasClass:function(b,a){return RegExp(" "+a+" ").test(" "+b.className+" ")},getAttribute:function(b,a){return b.getAttribute(a)},
setAttribute:function(b,a,c){b.setAttribute(a,c)},appendCss:function(b,k,d,h,g){if(-1===q.inArray(b,s)||g){var n;g=c(null,h);if(null!==k){g||(g=f.createDomNode("style",{type:"text/css"}),g.className="lazyloaded");g.onerror=function(){d(!1)};h||a.appendChild(g);try{n=e.createTextNode(k),g.appendChild(n)}catch(m){g.styleSheet.cssText=k}finally{d()}}else null!==b&&(g||(g=f.createDomNode("link",{rel:"stylesheet",type:"text/css"}),g.className="lazyloaded"),g.onerror=function(){d(!1)},h||a.appendChild(g),
l.isMsie()||l.isOpera()?g.onload=d:d(),g.href=b);s.push(b)}else d()},appendJs:function(b,k,d,h,g){if(-1===q.inArray(b,n)||g){g=f.createDomNode("script");var s=e.getElementsByTagName("script")[0],l=!1;(g=c(g,h))?(g.type="text/javascript",g.className="lazyloaded",g.async=!0,g.onreadystatechange=g.onload=function(){l||this.readyState&&"complete"!==this.readyState&&"loaded"!==this.readyState||(this.onreadystatechange=this.onload=null,l=!0,n.push(b),d())},g.onerror=function(){this.onload=this.onreadystatechange=
this.onerror=null;d()},h||(s?s.parentNode.insertBefore(g,s):a.appendChild(g)),k&&!l?(g.textContent?g.textContent=k:g.nodeValue?g.nodeValue=k:g.text=k,l=!0):null!==b&&(g.src=b),l&&(n.push(b),d())):d()}else d()},appendImg:function(b,a,h,e){var g=null;(g=c(g,e))||(g=new Image);g.onerror=function(){g.onload=g.onerror=null;h()};g.onload=function(){g.onload=g.onerror=null;h()};a?g.src=a:b&&(g.src=b);if(g.complete&&g.naturalWidth!==t)g.onload();d.push(b)},appendHtml:function(b,a,d,f){var g=c(null,f);if(g){if(a)try{g.innerHTML=
a,f.id&&l.isMsie()&&e.styleSheets[0].addRule("#"+f.id+":after","content: ' ';")}catch(n){g.innerText=a}d();h.push(b)}else d()}}}();m.namespace("helpers.dom",f)})(document,window.getNamespace());
(function(e,m,t){function c(b){d("["+s+" Adapter] "+b)}function f(b){if(b){var a="";switch(b.name||b.message||b.code){case FileError.QUOTA_EXCEEDED_ERR:a="File System Event: QUOTA_EXCEEDED_ERR";break;case FileError.NOT_FOUND_ERR:a="File System Event: NOT_FOUND_ERR, file does not exist";break;case FileError.SECURITY_ERR:a="File System Event: SECURITY_ERR";break;case FileError.INVALID_MODIFICATION_ERR:a="File System Event: INVALID_MODIFICATION_ERR";break;case FileError.INVALID_STATE_ERR:a="File System Event: INVALID_STATE_ERR";
break;default:a="File System Event: Unknown Error"}c(a,b)}}function r(b,a,d){if("."===a[0]||""===a[0])a=a.slice(1);a[0]?b.getDirectory(a[0],{create:!0},function(b){a.length?r(b,a.slice(1),d):d()},f):d()}function q(a,d,c){d=d.split("/");var e=d.length,g="",f=0;c=h(c);if(e){for(f=0;f<e-1;f+=1)g=g+d[f]+"/";r(a.root,g.split("/"),c)}else c()}function l(a){this.adapter=null;this.type=s;this.size=52428800;this.init(a)}var s="fileSystem",n=m.helpers.utils,d=n.log,h=n.callback,a=null;l.prototype=l.fn={isSupported:function(){null===
a&&((a=(!!e.requestFileSystem||!!e.webkitRequestFileSystem)&&!!e.Blob)||c(s+" is not supported"));return a},open:function(a){var d=this,h=d.adapter;null===h?(e.requestFileSystem=e.requestFileSystem||e.webkitRequestFileSystem,e.requestFileSystem(e.TEMPORARY,d.size,function(e){h=d.adapter=e;c("Try to create test resource");try{d.create("test-item",n.jsonToString({test:"test-content"}),function(g){g?d.remove("test-item",function(){c("Test resource created and successfully deleted");a(h)}):a(!1)})}catch(g){f(g),
a(!1)}},f)):a(h)},create:function(a,d,c){var h=this.adapter,g=function(a){f(a);c(!1,a)};q(h,a,function(){h.root.getFile(a,{create:!0},function(a){a.createWriter(function(a){a.onwriteend=function(){c(!0)};a.onerror=g;try{var b=new Blob([d],{type:"text/plain"});a.write(b)}catch(h){g(h)}},g)},g)})},read:function(a,d){var c=this.adapter,h=function(a){f(a);d(!1,a)};q(c,a,function(){c.root.getFile(a,{create:!1},function(a){a.file(function(a){var b=new FileReader;b.onloadend=function(){d(this.result)};b.readAsText(a)},
h)},h)})},update:function(a,d,c){this.create(a,d,c)},remove:function(a,d){var c=this.adapter,h=function(a){f(a);d(!1,a)};q(c,a,function(){c.root.getFile(a,{create:!1},function(a){a.remove(function(){d(!0)},h)},h)})},init:function(a){return this.isSupported()?(a&&a.size&&(this.size=a.size),this):!1}};m.namespace("cache.storage.adapter."+s,l)})(window,window.getNs());
(function(e,m,t){function c(c){q("["+r+" Adapter] "+c)}function f(c){this.adapter=null;this.type=r;this.dbName="cache";this.dbVersion="1.0";this.dbTable="offline";this.dbDescription="Local offline cache";this.dbKey="key";this.init(c)}var r="indexedDatabase",q=m.helpers.utils.log,l=null;f.prototype=f.fn={isSupported:function(){null===l&&((l=!!e.indexedDB||!!e.webkitIndexedDB||!!e.mozIndexedDB||!!e.OIndexedDB||!!e.msIndexedDB)||c(r+" is not supported"));return l},create:function(e,f,d){var h=this.dbTable,
a=this.dbName,b=this.adapter.transaction([h],"readwrite");e=b.objectStore(h).put({key:e,content:f});b.onerror=function(b){c("Failed to init transaction while creating/updating database entry "+a+" "+b);d(!1,b)};e.onerror=function(b){c("Failed to create/update database entry "+a+" "+b);d(!1,b)};e.onsuccess=function(){d(!0)}},read:function(e,f){var d=this.dbTable,h=this.dbName,a=this.adapter.transaction([d],"readonly"),d=a.objectStore(d).get(e);a&&d?(a.onerror=function(a){c("Failed to init transaction while reading database "+
h+" "+a)},d.onerror=function(a){c("Failed to read database entry "+h+" "+a);f(!1,a)},d.onsuccess=function(a){a.target.result&&a.target.result.content?f(a.target.result.content):f(!1)}):f(!1)},update:function(c,e,d){this.create(c,e,d)},remove:function(e,f){var d=this.dbTable,h=this.dbName,a=this.adapter.transaction([d],"readwrite"),d=a.objectStore(d)(d).put({key:e,content:""});a.onerror=function(a){c("Failed to init transaction while deleting database entry "+h+" "+a);f(!1,a)};d.onerror=function(a){c("Failed to delete database entry "+
h+" "+a);f(!1,a)};d.onsuccess=function(){f(!0)}},open:function(f,n){var d=this,h=null,a=null,b=null,k=d.dbName,u=d.dbTable,p,g,l,m;n||(n=!1);if(null===d.adapter)if(h=e.indexedDB||e.webkitIndexedDB||e.mozIndexedDB||e.OIndexedDB||e.msIndexedDB){e.webkitIndexedDB!==t&&(e.IDBTransaction=e.webkitIDBTransaction,e.IDBKeyRange=e.webkitIDBKeyRange);p=function(h){var g=a.result,e,n;d.adapter=g;d.dbVersion===g.version||!g.setVersion&&"function"!==typeof g.setVersion?f(g):(b=h.currentTarget.result.setVersion(d.dbVersion),
b.onfailure=function(a){c("Failed to open database: "+k+" "+a);f(!1)},b.onsuccess=function(b){e=a.result;n=e.createObjectStore(u,{keyPath:d.dbKey});c("Database needs upgrade: "+k+" "+b.oldVersion+" "+b.newVersion);n.createIndex("key","key",{unique:!0});n.createIndex("content","content",{unique:!1})})};g=function(b){var h=a.result.createObjectStore(u,{keyPath:d.dbKey});c("Database needs upgrade: "+k+" "+b.oldVersion+" "+b.newVersion);h.createIndex("key","key",{unique:!0});h.createIndex("content","content",
{unique:!1})};l=function(a){c("Failed to open database: "+k+" "+a);n||d.open(f,!0);f(!1)};m=function(a){c("Opening database request is blocked! "+k+" "+a);f(!1)};if(n)try{a=h.open(k,d.dbVersion)}catch(q){c(q),a=h.open(k)}else a=h.open(k);a.onsuccess=p;a.onupgradeneeded=g;a.onerror=l;a.onblocked=m}else f(!1);else f(d.adapter)},init:function(c){return this.isSupported()?(c&&(c.name&&(this.dbName=c.name),c.version&&(this.dbVersion=c.version),c.table&&(this.dbTable=c.table),c.description&&(this.dbDescription=
c.description),c.key&&(this.dbKey=c.key)),this):!1}};m.namespace("cache.storage.adapter."+r,f)})(window,window.getNs());
(function(e,m,t){function c(c,d,h,a,b,e){!e&&c?c.transaction(function(c){c.executeSql(d,h,a,b)}):e?e.executeSql(d,h,a,b):b(null,{code:0,message:"The storage adapter isn't available"})}function f(c){var d="Errorcode: "+c.code+", Message: "+c.message;c.info&&(d=d+" - "+c.info);l("["+q+" Adapter] "+d)}function r(c){this.adapter=null;this.type=q;this.dbName="merkel";this.dbVersion="1.0";this.dbDescription="resource cache";this.dbTable="cache";this.dbSize=4194304;this.init(c)}var q="webSqlDatabase",l=
m.helpers.utils.log,s=null;r.prototype=r.fn={isSupported:function(){null===s&&((s=!!e.openDatabase)||l("["+q+" Adapter] "+(q+" is not supported")));return s},create:function(e,d,h){c(this.adapter,"INSERT INTO "+this.dbTable+" (key, content) VALUES (?,?);",[e,d],function(){h(!0)},function(a,b){f(b);h(!1,b,{transaction:a})})},read:function(e,d){c(this.adapter,"SELECT content FROM "+this.dbTable+" WHERE key=?;",[e],function(c,a){var b=null;a&&a.rows&&1===a.rows.length&&(b=a.rows.item(0).content);d(b,
null,{transaction:c})},function(c,a){f(a);d(!1,a,{transaction:c})})},update:function(e,d,h){c(this.adapter,"UPDATE "+this.dbTable+" SET content = ?  WHERE key=?;",[d,e],function(){h(!0)},function(a,b){f(b);h(!1,b,{transaction:a})})},remove:function(e,d){c(this.adapter,"DELETE FROM "+this.dbTable+" WHERE key = ?;",[e],function(){d(!0)},function(c,a){f(a);d(!1,a,{transaction:c})})},open:function(n){var d=this,h=d.adapter,a=function(a,b){c(a,"CREATE TABLE IF NOT EXISTS "+d.dbTable+"(id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, key TEXT NOT NULL UNIQUE, content TEXT NOT NULL);",
[],function(){n(a)},function(a){f(a);n(!1)},b)},b=function(b){a(null,b)},k=function(a){a.info="Can't migrate to new database version and using localStorage instead. This may be caused by non-standard implementation of the changeVersion method. Please switch back your database version to use webSql on this device.";f(a);n(!1)};try{if(null===h&&d.isSupported())if(d.adapter=h=e.openDatabase(d.dbName,"",d.dbDescription,d.dbSize),String(h.version)!==String(d.dbVersion)&&h.changeVersion&&"function"===typeof h.changeVersion)try{h.changeVersion(h.version,
d.dbVersion,b,k)}catch(l){f(l),n(!1)}else h=e.openDatabase(d.dbName,d.dbVersion,d.dbDescription,d.dbSize),a(h);else d.isSupported()&&n(h)}catch(p){f(p),n(!1)}},init:function(c){return this.isSupported()?(c&&(c.description&&(this.dbDescription=c.description),c.name&&(this.dbName=c.name),c.size&&(this.dbSize=c.size),c.table&&(this.dbTable=c.table),c.version&&(this.dbVersion=String(c.version))),this):!1}};m.namespace("cache.storage.adapter."+q,r)})(window,window.getNs());
(function(e,m,t){function c(c){n("["+l+" Adapter] "+c)}function f(d){!d&&e.event&&(d=e.event);c("Event - key: "+(d.key||"no e.key event")+", url: "+(d.url||"no e.url event"))}function r(c){var a="localStorage";switch(c){case "local":a="localStorage";break;case "session":a="sessionStorage"}return a}function q(c){this.adapter=null;this.type=l;this.lifetime="local";this.init(c)}var l="webStorage";t=m.helpers.utils;var s=t.on,n=t.log,d=null;q.prototype=q.fn={isSupported:function(){var h=r(this.lifetime);
if(null===d)try{d=!!e[h]&&!!e[h].getItem}catch(a){c(l+" is not supported"),d=!1}return d},create:function(c,a,b){try{this.adapter.setItem(c,a),b(!0)}catch(d){f(d),b(!1,d)}},read:function(c,a){var b;try{(b=this.adapter.getItem(c))?a(b):a(!1)}catch(d){f(d),a(!1,d)}},update:function(c,a,b){this.create(c,a,b)},remove:function(c,a){try{this.adapter.removeItem(c),a(!0)}catch(b){f(b),a(!1,b)}},open:function(d){var a=this,b=a.adapter,k=r(a.lifetime);if(null===b)try{b=a.adapter=e[k],s(e,"storage",f),c("Try to create test resource"),
a.create("test-item",'{test: "test-content"}',function(e){e?a.remove("test-item",function(){c("Test resource created and successfully deleted");d(b)}):d(!1)})}catch(l){d(!1)}else a.isSupported()&&d(b)},init:function(c){return this.isSupported()?(c&&c.lifetime&&(this.lifetime=c.lifetime),this):!1}};m.namespace("cache.storage.adapter."+l,q)})(window,window.getNs());
(function(e,m,t,c){function f(a){h("["+q+" Adapter] "+a)}function r(a){this.adapter=null;this.type=q;this.isLoaded=!1;this.delay=25;this.init(a)}var q="applicationCache",l=t.helpers,s=l.utils,n=l.dom,d=s.on,h=s.log,a=s.callback,b=null,k=m.getElementsByTagName("html")[0];r.prototype=r.fn={isSupported:function(){null===b&&((b=!!e.applicationCache&&!!n.getAttribute(k,"manifest"))||f(q+" is not supported or there is no manifest html attribute"));return b},loaded:function(a){this.isLoaded||(this.isLoaded=
!0,e.setTimeout(function(){a();f("Event loaded")},this.delay))},open:function(b,k){var g=this,h=g.adapter,l=0,n,x;b=a(b);k&&k.progress&&(n=k.progress);n=a(n);if(g.isSupported()&&null!==h){x=function(){f("Event updateready");try{h.swapCache()}catch(a){f("Event updateready: swapcache is not available",a)}confirm("A new version of this website is available. Do you want to an update?")?e.location.reload(!0):g.loaded(b);return!1};d(h,"checking",function(){f("Event checking");return!1});d(h,"noupdate",
function(){f("Event noupdate");g.loaded(b);return!1});d(h,"downloading",function(){f("Event downloading");l=0;return!1});d(h,"progress",function(a){f("Event progress");var b="";g.delay=500;l+=1;b=a&&a.lengthComputable!==c?Math.round(100*a.loaded/a.total):Math.round(100*l/20);n(b);return!1});d(h,"cached",function(){f("Event cached");g.loaded(b);return!1});d(h,"updateready",function(){x()});d(h,"obsolete",function(){f("Event obsolete");e.location.reload(!0);return!1});d(h,"error",function(){f("Event error");
g.loaded(b);return!1});switch(h.status){case h.UNCACHED:g.loaded(b);break;case h.IDLE:n(100);g.loaded(b);break;case h.UPDATEREADY:x();break;case h.OBSOLETE:g.loaded(b)}d(e,"online",function(){try{h.update()}catch(a){f("Window event online: update cache is not available",a)}});e.setTimeout(function(){g.isLoaded||g.loaded(b)},12E3)}else g.loaded(b)},init:function(a){a=this.adapter;this.isSupported()&&null===a&&(this.adapter=e.applicationCache);return this}};t.namespace("cache.storage.adapter."+q,r)})(window,
document,window.getNs());
(function(e,m,t){function c(a){g("["+b+" controller] "+a)}function f(a,b,c){c.timeout=window.setTimeout(function(){b(!1)},5E3);F(a,function(a){window.clearTimeout(c.timeout);delete c.timeout;a?b(a):b(!1)})}function r(a){var b=null;try{b=p.jsonToObject(a)}catch(d){c("Couldn't convert json string to object."+d)}return b}function q(a,b,c){if(G){var d=e.createElement("canvas"),h,f=new Image,g=null,k=0,l=0;c||(c="jpeg");f.onerror=function(){f.onload=f.onerror=null;b()};f.onload=function(){f.onload=f.onerror=
null;k=d.height=f.height;l=d.width=f.width;h=d.getContext("2d");h.fillStyle="rgba(50, 50, 50, 0)";h.fillRect(0,0,l,k);h.drawImage(f,0,0);g=d.toDataURL("image/"+c);b(g)};f.src=a;if(f.complete&&f.naturalWidth!==t)f.onload()}else b(!1)}function l(a){var b=a.data,c=a.url;"css"===a.type&&(c=p.url(c),c=c.folder,b=b.replace(/url\(\../g,"url("+c+".."),b=b.replace(/url\(\'../g,"url('"+c+".."),b=b.replace(/url\(\"../g,'url("'+c+".."),a.data=b);return a}function s(a){return{ajax:a.ajax,data:a.data,expires:(new Date).getTime()+
(a.lifetime||C.lifetime),group:a.group!==t?a.group:C.group,lastmod:a.lastmod||C.lastmod,lifetime:a.lifetime!==t?a.lifetime:C.lifetime,type:a.type||C.type,version:a.version||C.version}}function n(a){return B&&B[a]?!!B[a]:!1}function d(a,b){var e=null,f;a&&a.length?(f=a[0].type,c("Testing for storage adapter type: "+f),x[f]?e=new x[f](v):d(a.slice(1),b),e&&e.isSupported()?e.open(function(h){h?(w=f,B=a[0],c("Used storage adapter type: "+w),b(e)):d(a.slice(1),b)}):d(a.slice(1),b)):w||b(!1)}function h(a,
b){var e=null,f=0,g;if(b)try{c("Testing for storage adapter type: "+b),x[b]?e=new x[b](v):h(a),e&&e.isSupported()?e.open(function(d){if(d){w=b;g=D.length;for(f=0;f<g;f+=1)D[f].type===b&&(B=D[f]);B?(c("Used storage type: "+w),a(e)):(c("Storage config not found: "+w),h(a))}else h(a)}):h(a)}catch(k){c("Storage adapter could not be initialized: type "+b,k),h(a)}else d(D,a)}function a(a,b){this.isEnabled=!0;this.adapter=null;this.adapters={types:D,defaults:v};this.appCacheAdapter=null;this.resourceDefaults=
C;this.init(a,b)}var b="storage",k=m.helpers,u=k.client,p=k.utils,g=p.log,z=p.callback,A=p.getJson(),F=p.xhr,x=m.cache.storage.adapter,G=u.hasCanvas(),D=[{type:"fileSystem",css:!0,js:!0,html:!0,img:!0},{type:"indexedDatabase",css:!0,js:!0,html:!0,img:!0},{type:"webSqlDatabase",css:!0,js:!0,html:!0,img:!0},{type:"webStorage",css:!0,js:!0,html:!0,img:!0}],v={name:"localcache",table:"cache",description:"local resource cache",size:4194304,version:"1.0",key:"key",lifetime:"local",offline:!0},w=null,B=
null,C={ajax:!0,lifetime:2E4,group:0,lastmod:(new Date).getTime(),type:"css",version:1};a.prototype=a.fn={create:function(a,b){var d=this,e=a.url,h=a.type,g=function(f){if(f)if(a.data=f,a=l(a),null!==d.adapter&&n(h)){f=p.jsonToString(e);var g=s(a),k=p.jsonToString(g);a.expires=g.expires;a.version=g.version;try{d.adapter.create(f,k,function(d){d?(c("Create new resource in storage adapter: type "+h+", url "+e),b(a)):(c("Create new resource in storage adapter failed"),b(!1))})}catch(x){b(a)}}else c("Trying to create new resource, but resource type is not cachable or storage adapter is not available: type "+
h+", url "+e),b(a);else c("Couldn't get data via network"),b(a)};b=z(b);a.ajax?"img"===h?q(e,g):f(e,g,a):a.data?g(a.data):b(!1)},read:function(a,b){var d=this,e=a.url,h=a.type;b=z(b);if(null!==this.adapter&&n(h)){c("Trying to read resource from storage: type "+h+", url "+e);try{d.adapter.read(p.jsonToString(e),function(f){f?(a=r(f))?(a.url=e,c("Successfully read resource from storage: type "+h+", url "+e),b(a,!0)):d.remove({url:e,type:h},function(){b(!1)}):(c("There is no data coming back from storage while reading: type "+
h+", url "+e),b(!1))})}catch(g){f(e,function(d){a.data=d;c("Try to read resource from storage, but storage adapter is not available: type "+h+", url "+e);b(a,!0)},a)}}else b(a)},update:function(a,b){var d=this,e=a.url,h=a.type,g=function(f){if(f)if(a.data=f,a=l(a),null!==d.adapter&&n(h)){f=p.jsonToString(e);var g=s(a),k=p.jsonToString(g);a.expires=g.expires;a.version=g.version;try{d.adapter.update(f,k,function(d){d?(c("Update existing resource in storage adapter: type "+h+", url "+e),b(a)):(c("Updating resource in storage failed."),
b(!1))})}catch(x){b(a)}}else c("Resource type is not cachable or storage adapter is not available: type "+h+", url "+e),b(a);else c("Couldn't get data via network, trying to used stored version"),d.read(a,function(c){c&&c.data?(a.data=c.data,b(a)):b(!1)})};b=z(b);a.ajax?"img"===h?q(e,g):f(e,g,a):a.data?g(a.data):b(!1)},remove:function(a,b){var d=a.url,e=a.type;b=z(b);null!==this.adapter&&n(e)?this.adapter.remove(p.jsonToString(d),function(f){f?(c("Delete resource form storage: type "+e+", url "+d),
b(a)):(c("Deleting resource form storage failed: type "+e+", url "+d),b(!1))}):(c("Delete resource from storage failed, resource type is not cachable or there is no storage adapter: type "+e+", url "+d),b(a))},init:function(a,b){var d=this,e=!1;b&&b.isEnabled!==t&&(d.isEnabled=!!b.isEnabled);d.isEnabled&&A?(b&&(b.description&&(v.description=String(b.description)),b.key&&(v.key=String(b.key)),b.lifetime&&(v.lifetime=String(b.lifetime)),b.name&&(v.name=String(b.name)),b.size&&(v.size=parseInt(b.size,
10)),b.table&&(v.table=String(b.table)),b.type&&(v.type=e=String(b.type)),b.offline&&(v.offline=Boolean(b.offline)),b.version&&(v.version=String(b.version))),v.offline&&x.applicationCache&&(d.appCacheAdapter=new x.applicationCache(v)),h(function(b){d.adapter=b;a=z(a);a(d)},e)):(A||c("There is no json support"),d.isEnabled||c("Caching data is disabled"),a(d))}};m.namespace("cache.storage.controller",a)})(document,window.getNs());
(function(e,m,t,c){function f(a){d("["+q+" controller] "+a)}function r(a,b){this.storage=null;this.init(a,b)}var q="cache";e=t.helpers;var l=e.dom,s=e.utils,n=e.client,d=s.log,h=s.callback;r.prototype=r.fn={load:function(a,b){var d=this,e=(new Date).getTime(),p=function(){var a=0,b=0,c=null;return{init:function(d,e){c=e;a=d;b=0},loaded:function(){b+=1;b===a&&c()}}}(),g=function(a,b,c){var d=a.url,e=h(a.loaded),f=function(){p.loaded();e(a)},g=a.node||null;c=!!c;switch(a.type){case "js":l.appendJs(d,
b,f,g,c);break;case "css":l.appendCss(d,b,f,g,c);break;case "img":l.appendImg(d,b,f,g,c);break;case "html":l.appendHtml(d,b,f,g,c);break;default:f()}},m=function(a){var b=a.data||null,h=function(a,b){a&&a.data?g(a,a.data,b):g(a,null,b)},l=d.storage,p=l.resourceDefaults;a.ajax=a.ajax!==c?!!a.ajax:p.ajax;l.read(a,function(p){if(p&&p.data){var m=a,q=d.storage.resourceDefaults,r=parseInt(p.lifetime,10),s=p.version,t=p.lastmod?p.lastmod:0,w=!1,z,A=m.lastmod?m.lastmod:0,w=!0;z=!1;m.version=z=m.version!==
c?parseFloat(m.version):q.version;m.group=m.group!==c?parseFloat(m.group):q.group;A&&t?(m.lastmod=parseInt(A,10),w=t===m.lastmod):!A&&t?A=t:A||(A=q.lastmod);w=w&&z===s;z=0!==r&&(-1!==r&&w&&p.expires>e||-1===r&&w);m.lastmod=A;m.isValid=z;a=m;a.isValid||!n.isOnline()?(f("Resource is up to date: type "+a.type+", url "+a.url),(b=p.data)&&g(a,b)):(f("Resource is outdated and needs update: type "+a.type+", url "+a.url),l.update(a,h))}else f("Resource or resource data is not available in storage adapter: type "+
a.type+", url "+a.url),l.create(a,h)})},q=function(a,b){var c=0,d=a.length,e=null;p.init(d,b);for(c=0;c<d;c+=1)(e=a[c])&&e.url&&m(e)},r=function(a,b,c){var d=a.length;for(c||(c=0);!a[c]&&c<d;)c+=1;c>=d?b():(d=a[c],q(d,function(){r(a,b,c+1)}))};(function(a,c){a&&s.isArray(a)||(a=[]);for(var d=a,e=[],g,k=0,l,p=d.length,k=0;k<p;k+=1)l=d[k],(g=l.group)||(g=0),g=e[g]?e[g]:e[g]=[],g.push(l);a=e;c=h(b);f("Load resource function called: resources count "+a.length);r(a,c)})(a,b)},remove:function(a,b){var c=
this.storage,d=function(a,b){var d=a.length,e,h,l=function(a,c){f("Successfully removed resource: url "+c);a===d-1&&b()};if(d)for(e=0;e<d;e+=1)(h=a[e])&&c.remove(h,l(e,h.url));else b()};(function(a,c){a&&s.isArray(a)||(a=[]);c=h(b);f("Remove resource function called: resources count "+a.length);d(a,c)})(a,b)},init:function(a,b){var c=this;a=h(a);f("Cache initializing and checking for storage adapters");new t.cache.storage.controller(function(b){c.storage=b;a(b)},b)}};t.namespace("cache.controller",
r)})(window,document,window.getNs());
(function(e,m,t){function c(c){this.storage=this.controller=null;this.params=c;this.queue=new n;this.calls=0}function f(e){var a=null,b=d.length,f;e||(e={});for(f=0;f<b;f+=1)s(d[f].params)===s(e)&&(a=d[f]);a||(a=new c(e),d.push(a));return a}var r=m.cache.controller;t=m.helpers;var q=t.utils,l=q.isArray,s=q.jsonToString,n=t.queue,d=[];m.namespace("cache.load",function(c,a,b){var d=f(b),m=function(a,c,e){l(a)?d.controller.load(a,c):"applicationCache"===a&&((a=d.storage)&&a.appCacheAdapter?a.appCacheAdapter.open(c,
b):c())};d.storage?m(c,a,b):(d.queue.add(function(){m(c,a,b)}),d.calls+=1,1===d.calls&&(d.controller=new r(function(a){d.storage=a;d.controller?d.queue.flush(this):d.interval=e.setInterval(function(){d.controller&&(e.clearInterval(d.interval),d.queue.flush(this))},25)},b)));return this})})(window,window.getNs());