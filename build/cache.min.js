(function(d,r){function h(){d[g]||(d[g]={});return d[g]}var g="app",f;f=h();f.namespace=function(f,h){if(f){f=String(f);var l=f.split("."),m=l.length,c=d[g],a;c||(d[g]={});if(!l)return!1;for(a=0;a<m;a+=1)c[l[a]]||(c[l[a]]={},a===m-1&&h&&(c[l[a]]=h)),c=c[l[a]];return c}return!1};d[g]=f;d.getNamespace=d.getNs=h})(window);
(function(d,r){function h(){if(!(this instanceof h))return new h;this.methods=[];this.response=null;this.flushed=!1}h.prototype=h.fn={add:function(d){this.flushed?d(this.response):this.methods.push(d)},flush:function(d){if(!this.flushed)for(this.response=d,this.flushed=!0;this.methods[0];)this.methods.shift()(d)}};d.namespace("helpers.queue",h)})(window.getNs());
(function(d,r,h,g){var f=function(){var h=null,n=d.console!==g,l=n?d.console:null,m=n&&l.time!==g&&l.timeEnd!==g,c=[];return{isString:function(a){return"string"===typeof a||a instanceof String},isFunction:function(a){return"function"===typeof a||a instanceof Function},isArray:function(a){var b=Array.isArray,e=Object.prototype.toString;f.isArray=b&&"function"===typeof b?function(a){return b(a)}:e&&"function"===e?function(a){return"[object Array]"===e.call(a)}:function(a){return!!a.sort&&"function"===
typeof a.sort};return f.isArray(a)},inArray:function(a,b,e){f.inArray=Array.prototype.indexOf?function(a,b,e){return c.indexOf.call(b,a,e)}:function(a,b,e){var d=b.length,c=0;if(e)return b[e]&&b[e]===a?e:-1;for(c=0;c<d;c+=1)if(b[c]===a)return c;return-1};return f.inArray(a,b,e)},callback:function(a){f.isFunction(a)||(a=function(){return g});return a},on:function(a,b,e){f.on="function"===typeof d.addEventListener?function(a,b,e){a.addEventListener(b,e,!1)}:"function"===typeof r.attachEvent?function(a,
b,e){a.attachEvent("on"+b,e)}:function(a,b,e){a["on"+b]=e};f.on(a,b,e)},off:function(a,b,e){f.off="function"===typeof d.removeEventListener?function(a,b,e){a.removeEventListener(b,e,!1)}:"function"===typeof r.detachEvent?function(a,b,e){a.detachEvent("on"+b,e)}:function(a,b){a["on"+b]=null};f.off(a,b,e)},getXhr:function(){for(var a=null,b=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],
e=b.length,v=0,v=0;v<e;v+=1){try{a=b[v]()}catch(p){continue}break}return a},xhr:function(a,b,e,v){var p=f.getXhr(),d,c="GET";b=f.callback(b);if(p)if(a){v!==g?c="POST":v=null;e===g&&(e=!0);d=function(){if(4===p.readyState&&(200<=p.status&&400>p.status||0===p.status))try{var a=p.responseText;a?b(a):b(!1)}catch(e){b(!1)}else 4===p.readyState&&b(!1)};p.open(c,a,e);try{p.onreadystatechange!==g?p.onreadystatechange=d:p.onload!==g&&(p.onload=d)}catch(k){p.onload=null,p.onload=d}p.send(v)}else b(!1);else b(!1)},
getJson:function(){null===h&&(d.JSON&&d.JSON.stringify)&&(h=d.JSON);return h},jsonToString:function(a){var b=!1;null===h&&(h=f.getJson());h&&a!==g&&(b=h.stringify(a));return b},jsonToObject:function(a){var b=!1;null===h&&(h=f.getJson());h&&a!==g&&(b=h.parse(a));return b},logTimerStart:function(a){m&&d.console.time(a)},logTimerEnd:function(a){m&&d.console.timeEnd(a)},url:function(a){if(f.isString(a)){var b=r.createElement("a"),e;b.href=a;e=b.pathname.match(/\/([^\/?#]+)$/i);return{source:a,protocol:b.protocol,
host:b.hostname,port:b.port,query:b.search,file:e?e[1]:"/",hash:b.hash,path:b.pathname.replace(/^([^\/])/,"/$1"),extension:function(a){a=a.split(".");return a.length?a[a.length-1]:!1}(a),folder:function(){var b=a.lastIndexOf("/");return a.substr(0,b+1)}()}}},trim:function(a){if(!f.isString(a))return a;f.isFunction(String.prototype.trim)||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});return a.trim()}}}();h.namespace("helpers.utils",f)})(window,document,window.getNs());
(function(d,r,h,g){var f=function(){function f(){parseInt(d.orientation,10)}function n(){a===g&&(p(d,"online",n),p(d,"offline",n));a=r.onLine!==g?!!r.onLine:!0}var l,m,c,a,b,e,v=(r.userAgent||r.vendor||d.opera).toLowerCase(),p=h.helpers.utils.on;return{isiOS:function(){l===g&&(l=null!==v.match(/(iphone|ipod|ipad)/))&&!e&&(p(d,"orientationchange",f),e=!0);return l},isMsie:function(){c===g&&(c=null!==v.match(/(msie)/));return c},isOpera:function(){m===g&&(m=null!==v.match(/(opera)/));return m},isOnline:function(){a===
g&&n();return a},hasCanvas:function(){if(b===g){var a=document.createElement("canvas");b=!(!a.getContext||!a.getContext("2d"))}return b}}}();h.namespace("helpers.client",f)})(window,window.navigator,window.getNs());
(function(d,r,h){function g(g,f){f&&(f.dom?g=f.dom:f.id&&(g=d.getElementById(f.id)));return g}var f=function(){var q=r.helpers,n=q.utils,l=q.client,m=[],c=[],a=[],b=[],e=d.getElementsByTagName("head")[0];return{nuke:function(){m=[];c=[];a=[];b=[]},createDomNode:function(a,b){var e=d.createElement(a),c;if(b)for(c in b)b.hasOwnProperty(c)&&e.setAttribute(c,b[c]);return e},hasClass:function(a,b){return RegExp(" "+b+" ").test(" "+a.className+" ")},getAttribute:function(a,b){return a.getAttribute(b)},
setAttribute:function(a,b,e){a.setAttribute(b,e)},appendCss:function(a,b,c,s,k){if(-1===n.inArray(a,m)||k){var h;k=g(null,s);if(null!==b){k||(k=f.createDomNode("style",{type:"text/css"}),k.className="lazyloaded");k.onerror=function(){c(!1)};s||e.appendChild(k);try{h=d.createTextNode(b),k.appendChild(h)}catch(t){k.styleSheet.cssText=b}finally{c()}}else null!==a&&(k||(k=f.createDomNode("link",{rel:"stylesheet",type:"text/css"}),k.className="lazyloaded"),k.onerror=function(){c(!1)},s||e.appendChild(k),
l.isMsie()||l.isOpera()?k.onload=c:c(),k.href=a);m.push(a)}else c()},appendJs:function(a,b,m,s,k){if(-1===n.inArray(a,c)||k){k=f.createDomNode("script");var h=d.getElementsByTagName("script")[0],l=!1;(k=g(k,s))?(k.type="text/javascript",k.className="lazyloaded",k.async=!0,k.onreadystatechange=k.onload=function(){l||this.readyState&&"complete"!==this.readyState&&"loaded"!==this.readyState||(this.onreadystatechange=this.onload=null,l=!0,c.push(a),m())},k.onerror=function(){this.onload=this.onreadystatechange=
this.onerror=null;m()},s||(h?h.parentNode.insertBefore(k,h):e.appendChild(k)),b&&!l?(k.textContent?k.textContent=b:k.nodeValue?k.nodeValue=b:k.text=b,l=!0):null!==a&&(k.src=a),l&&(c.push(a),m())):m()}else m()},appendImg:function(b,e,c,d){var k=null;(k=g(k,d))||(k=new Image);k.onerror=function(){k.onload=k.onerror=null;c()};k.onload=function(){k.onload=k.onerror=null;c()};e?k.src=e:b&&(k.src=b);if(k.complete&&k.naturalWidth!==h)k.onload();a.push(b)},appendHtml:function(a,e,c,s){var k=g(null,s);if(k){if(e)try{k.innerHTML=
e,s.id&&l.isMsie()&&d.styleSheets[0].addRule("#"+s.id+":after",'content: " ";')}catch(m){k.innerText=e}c();b.push(a)}else c()}}}();r.namespace("helpers.dom",f)})(document,window.getNs());
(function(d,r){function h(a,b,e){var c=function(a){e(!1)};if("."===b[0]||""===b[0])b=b.slice(1);b[0]?a.getDirectory(b[0],{create:!0},function(a){b.length?h(a,b.slice(1),e):e(!0)},c):e(!0)}function g(a,b,e){b=b.split("/");var c=b.length,d="",g=0;e=m(e);if(c){for(g=0;g<c-1;g+=1)d=d+b[g]+"/";h(a.root,d.split("/"),e)}else e(!0)}function f(a){if(!(this instanceof f))return new f(a);this.adapter=null;this.type=q;this.size=52428800;this.init(a)}var q="fileSystem",n=d.getNs&&d.getNs()||d,l=n.helpers.utils,
m=l.callback,c=null;f.prototype=f.fn={isSupported:function(){null===c&&(c=(!!d.requestFileSystem||!!d.webkitRequestFileSystem||!!d.moz_requestFileSystem)&&(!!d.Blob||!!d.BlobBuilder)&&d.FileReader);return c},open:function(a){var b=this,e=b.adapter,c=function(b){a(!1)};a=m(a);null===e?(d.requestFileSystem=d.requestFileSystem||d.webkitRequestFileSystem||d.moz_requestFileSystem,d.requestFileSystem(d.TEMPORARY,b.size,function(c){e=b.adapter=c;try{b.create("test-item",l.jsonToString({test:"test-content"}),
function(c){c?b.remove("test-item",function(){a(e)}):a(!1)})}catch(d){a(!1)}},c)):a(e)},create:function(a,b,e){e=m(e);a||e(!1);var c=this.adapter,d=function(a){e(!1,a)};g(c,a,function(){c.root.getFile(a,{create:!0},function(a){a.createWriter(function(a){var c;a.onwriteend=function(){e(!0)};a.onerror=d;try{Blob?(c=new Blob([b],{type:"text/plain"}),a.write(c)):BlobBuilder&&(c=new BlobBuilder,c.append(b),a.write(c.getBlob("application/json")))}catch(g){d(g)}},d)},d)})},read:function(a,b){b=m(b);a||b(!1);
var e=this.adapter,c=function(a){b(!1,a)};g(e,a,function(){e.root.getFile(a,{create:!1},function(a){a.file(function(a){var e=new FileReader;e.onloadend=function(){b(this.result)};e.onerror=c;e.onabort=c;e.readAsText(a)},c)},c)})},update:function(a,b,e){this.create(a,b,e)},remove:function(a,b){b=m(b);a||b(!1);var e=this.adapter,c=function(a){b(!1,a)};g(e,a,function(){e.root.getFile(a,{create:!1},function(a){a.remove(function(){b(!0)},c)},c)})},init:function(a){return this.isSupported()?(a&&a.size&&
(this.size=a.size),this):!1}};l.isFunction(n.namespace)?n.namespace("cache.storage.adapter."+q,f):n[q]=f})(window);
(function(d,r){function h(d){if(!(this instanceof h))return new h(d);this.adapter=null;this.type=g;this.dbName="cache";this.dbVersion="1.0";this.dbTable="offline";this.dbDescription="Local offline cache";this.dbKey="key";this.init(d)}var g="indexedDatabase",f=d.getNs&&d.getNs()||d,q=f.helpers.utils,n=q.callback,l=null;h.prototype=h.fn={isSupported:function(){null===l&&(l=!!d.indexedDB||!!d.webkitIndexedDB||!!d.mozIndexedDB||!!d.OIndexedDB||!!d.msIndexedDB);return l},create:function(d,c,a){a=n(a);
d||a(!1);var b=this.dbTable,e=this.adapter.transaction([b],"readwrite");d=e.objectStore(b).put({key:d,content:c});e.onerror=function(b){a(!1,b)};d.onerror=function(b){a(!1,b)};d.onsuccess=function(){a(!0)}},read:function(d,c){c=n(c);d||c(!1);var a=this.dbTable,b=this.adapter.transaction([a],"readonly"),a=b.objectStore(a).get(d);b&&a?(b.onerror=function(a){c(!1,a)},a.onerror=function(a){c(!1,a)},a.onsuccess=function(a){a.target.result&&a.target.result.content?c(a.target.result.content):c(!1)}):c(!1)},
update:function(d,c,a){this.create(d,c,a)},remove:function(d,c){c=n(c);d||c(!1);var a=this.dbTable,b=this.adapter.transaction([a],"readwrite"),a=b.objectStore(a).put({key:d,content:""});b.onerror=function(a){c(!1,a)};a.onerror=function(a){c(!1,a)};a.onsuccess=function(){c(!0)}},open:function(g,c){c||(c=!1);g=n(g);var a=this,b=null,e=null,f=null,p=a.dbName,h=a.dbTable,s=function(b){b||g(!1);a.create("test-item",'{test: "test-content"}',function(e){e?a.remove("test-item",function(){g(b)}):g(!1)})},
k,l,t,w,A;if(null===a.adapter)if(b=d.indexedDB||d.webkitIndexedDB||d.mozIndexedDB||d.OIndexedDB||d.msIndexedDB){d.webkitIndexedDB!==r&&(d.IDBTransaction=d.webkitIDBTransaction,d.IDBKeyRange=d.webkitIDBKeyRange);k=function(b){b.createIndex(a.dbKey,a.dbKey,{unique:!0});b.createIndex("content","content",{unique:!1})};l=function(b){var c=e.result,d,p;a.adapter=c;a.dbVersion===c.version||!c.setVersion&&"function"!==typeof c.setVersion?(a.adapter=c,s(c)):(f=b.currentTarget.result.setVersion(a.dbVersion),
f.onfailure=function(a){g(!1)},f.onsuccess=function(b){d=e.result;p=d.createObjectStore(h,{keyPath:a.dbKey});k(p)})};t=function(b){b=e.result.createObjectStore(h,{keyPath:a.dbKey});k(b)};w=function(b){c||a.open(g,!0);g(!1)};A=function(a){g(!1)};if(c)try{e=b.open(p,a.dbVersion)}catch(C){e=b.open(p)}else e=b.open(p);e.onsuccess=l;e.onupgradeneeded=t;e.onerror=w;e.onblocked=A}else g(!1);else s(a.adapter)},init:function(d){return this.isSupported()?(d&&(d.name&&(this.dbName=String(d.name)),d.version&&
(this.dbVersion=parseInt(d.version,10)),d.table&&(this.dbTable=d.table),d.description&&(this.dbDescription=String(d.description)),d.key&&(this.dbKey=d.key)),this):!1}};q.isFunction(f.namespace)?f.namespace("cache.storage.adapter."+g,h):f[g]=h})(window);
(function(d,r){function h(c,a,b,e,d,g){!g&&c?c.transaction(function(c){c.executeSql(a,b,e,d)}):g?g.executeSql(a,b,e,d):d(null,{code:0,message:"The storage adapter isn't available"})}function g(c){if(!(this instanceof g))return new g(c);this.adapter=null;this.type=f;this.dbName="cache";this.dbVersion="1.0";this.dbDescription="resource cache";this.dbTable="websql";this.dbSize=4194304;this.init(c)}var f="webSqlDatabase",q=d.getNs&&d.getNs()||d,n=q.helpers.utils,l=n.callback,m=null;g.prototype=g.fn={isSupported:function(){null===
m&&(m=!!d.openDatabase);return m},create:function(c,a,b){b=l(b);c||b(!1);h(this.adapter,"INSERT INTO "+this.dbTable+" (key, content) VALUES (?,?);",[c,a],function(){b(!0)},function(a,c){b(!1,c,{transaction:a})})},read:function(c,a){a=l(a);c||a(!1);h(this.adapter,"SELECT content FROM "+this.dbTable+" WHERE key=?;",[c],function(b,e){var c=!1;e&&(e.rows&&1===e.rows.length)&&(c=e.rows.item(0).content);a(c,null,{transaction:b})},function(b,e){a(!1,e,{transaction:b})})},update:function(c,a,b){b=l(b);c||
b(!1);h(this.adapter,"UPDATE "+this.dbTable+" SET content = ?  WHERE key=?;",[a,c],function(){b(!0)},function(a,c){b(!1,c,{transaction:a})})},remove:function(c,a){a=l(a);c||a(!1);h(this.adapter,"DELETE FROM "+this.dbTable+" WHERE key = ?;",[c],function(){a(!0)},function(b,c){a(!1,c,{transaction:b})})},open:function(c){c=l(c);var a=this,b=a.adapter,e=function(b){b||c(!1);a.create("test-item",'{test: "test-content"}',function(e){e?a.remove("test-item",function(){c(b)}):c(!1)})},g=function(b,c){h(b,
"CREATE TABLE IF NOT EXISTS "+a.dbTable+"(id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, key TEXT NOT NULL UNIQUE, content TEXT NOT NULL);",[],function(){e(a.adapter)},function(a){e(!1)},c)},p=function(a){g(null,a)},f=function(a){c(!1)};try{if(null===b&&a.isSupported())if(a.adapter=b=d.openDatabase(a.dbName,"",a.dbDescription,a.dbSize),String(b.version)!==String(a.dbVersion)&&b.changeVersion&&"function"===typeof b.changeVersion)try{b.changeVersion(b.version,a.dbVersion,p,f)}catch(s){c(!1)}else b=
d.openDatabase(a.dbName,a.dbVersion,a.dbDescription,a.dbSize),g(b);else a.isSupported()&&e(b)}catch(k){c(!1)}},init:function(c){return this.isSupported()?(c&&(c.description&&(this.dbDescription=c.description),c.name&&(this.dbName=c.name),c.size&&(this.dbSize=c.size),c.table&&(this.dbTable=c.table),c.version&&(this.dbVersion=String(c.version))),this):!1}};n.isFunction(q.namespace)?q.namespace("cache.storage.adapter."+f,g):q[f]=g})(window);
(function(d,r){function h(a){a=l(a);switch(a){case "local":a="localStorage";break;case "session":a="sessionStorage";break;default:a="localStorage"}return a}function g(a){if(!(this instanceof g))return new g(a);this.adapter=null;this.type=f;this.lifetime="local";this.asynch=!0;this.init(a)}var f="webStorage",q=d.getNs&&d.getNs()||d,n=q.helpers.utils,l=n.trim,m=n.callback,c=null;g.prototype=g.fn={isSupported:function(){var a=h(this.lifetime);if(null===c)try{c=!!d[a]&&!!d[a].getItem}catch(b){c=!1}return c},
create:function(a,b,c){c=m(c);if(!a)if(d.asynch)c(!1);else return!1;var d=this,g=!0;try{d.adapter.setItem(a,b)}catch(f){g=!g}if(d.asynch)c(g);else return g},read:function(a,b){b=m(b);if(!a)if(c.asynch)b(!1);else return!1;var c=this,d,g=!0;try{g=(d=c.adapter.getItem(a))?d:!1}catch(f){g=!g}if(c.asynch)b(g);else return g},update:function(a,b,c){if(this.asynch)this.create(a,b,c);else return this.create(a,b,c)},remove:function(a,b){b=m(b);if(!a)if(c.asynch)b(!1);else return!1;var c=this,d=!0;try{c.adapter.removeItem(a)}catch(g){d=
!d}if(c.asynch)b(d);else return d},open:function(a){var b=this,c=b.adapter,g=h(b.lifetime),f,l;a=m(a);if(null===c)try{if(c=b.adapter=d[g],b.asynch)b.create("test-item",'{test: "test-content"}',function(d){d?b.remove("test-item",function(){a(c)}):a(!1)});else{if(f=b.create("test-item",'{test: "test-content"}'))if(l=b.remove("test-item"))return c;return!1}}catch(s){if(b.asynch)a(!1);else return!1}else if(b.isSupported())if(b.asynch)a(c);else return c},init:function(a){return this.isSupported()?(a&&
(a.lifetime&&(this.lifetime=l(String(a.lifetime))),a.asynch!==r&&(this.asynch=!!a.asynch)),this):!1}};n.isFunction(q.namespace)?q.namespace("cache.storage.adapter."+f,g):q[f]=g})(window);
(function(d,r,h){function g(a,b){b.isLoaded||(b.isLoaded=!0,b.progressCallback(100),d.setTimeout(function(){a()},b.delay))}function f(a){if(!(this instanceof f))return new f(a);this.adapter=null;this.type=q;this.isLoaded=!1;this.delay=0;this.opened=!0;this.init(a)}var q="applicationCache",n=d.getNs&&d.getNs()||d,l=n.helpers,m=l.utils,c=l.dom,a=m.on,b=m.callback,e=null,v=r.getElementsByTagName("html")[0];f.prototype=f.fn={isSupported:function(){null===e&&(e=!!d.applicationCache&&!!c.getAttribute(v,
"manifest"));return e},open:function(c,e){var f=this,k=f.adapter,l=0,m,w;f.opened=!0;c=b(c);e&&e.progress&&(m=e.progress);m=f.progressCallback=b(m);if(f.isSupported()&&null!==k){w=function(){try{k.swapCache()}catch(a){}confirm("A new version of this website is available. Do you want to an update?")?d.location.reload(!0):g(c,f);return!1};a(k,"noupdate",function(){g(c,f);return!1});a(k,"downloading",function(){l=0;return!1});a(k,"progress",function(a){var b=0;f.delay=500;l+=1;b=a&&a.lengthComputable!==
h?Math.round(100*a.loaded/a.total):Math.round(100*l/20);m(b);return!1});a(k,"cached",function(){g(c,f);return!1});a(k,"updateready",function(){w()});a(k,"obsolete",function(){d.location.reload(!0);return!1});a(k,"error",function(){g(c,f);return!1});switch(k.status){case k.UNCACHED:g(c,f);break;case k.IDLE:g(c,f);break;case k.UPDATEREADY:w();break;case k.OBSOLETE:g(c,f)}a(d,"online",function(){try{k.update()}catch(a){}});d.setTimeout(function(){f.isLoaded||g(c,f)},12E3)}else g(c,f)},init:function(a){a=
this.adapter;this.isSupported()&&null===a&&(this.adapter=d.applicationCache);return this}};n.namespace("cache.storage.adapter."+q,f)})(window,document);
(function(d,r,h,g){function f(a,b,c){c.timeout=d.setTimeout(function(){b(!1)},4E3);B(a,function(a){d.clearTimeout(c.timeout);delete c.timeout;a?b(a):b(!1)})}function q(a){var b=null;try{b=u.jsonToObject(a)}catch(c){}return b}function n(a,b,c){if(A){var d=r.createElement("canvas"),e,f=new Image,k=null,h=0,s=0;c||(c="jpeg");f.onerror=function(){f.onload=f.onerror=null;b()};f.onload=function(){f.onload=f.onerror=null;h=d.height=f.height;s=d.width=f.width;e=d.getContext("2d");e.fillStyle="rgba(50, 50, 50, 0)";
e.fillRect(0,0,s,h);e.drawImage(f,0,0);k=d.toDataURL("image/"+c);b(k)};f.src=a;if(f.complete&&f.naturalWidth!==g)f.onload()}else b(!1)}function l(a){var b=a.data,c=a.url;"css"===a.type&&(c=u.url(c),c=c.folder,b=b.replace(/url\(\../g,"url("+c+".."),b=b.replace(/url\(\'../g,"url('"+c+".."),b=b.replace(/url\(\"../g,'url("'+c+".."),a.data=b);return a}function m(a,b){return{ajax:a.ajax,data:a.data,expires:(new Date).getTime()+(a.lifetime||b.lifetime),group:a.group!==g?a.group:b.group,lastmod:a.lastmod||
b.lastmod,lifetime:a.lifetime!==g?a.lifetime:b.lifetime,type:a.type||b.type,version:a.version||b.version}}function c(a){return y&&y[a]?!!y[a]:!1}function a(b,c){var d=null,e,g;b&&b.length?(e=b[0].type,g=b.slice(1),w[e]?d=new w[e](z):a(g,c),d&&d.isSupported()?d.open(function(f){f?(x=e,y=b[0],c(d)):a(g,c)}):a(g,c)):x||c(!1)}function b(c,d,e){var g=null,f=0,k;if(e)try{w[e]?(g=new w[e](z))&&g.isSupported()?g.open(function(a){if(a){x=e;k=d.length;for(f=0;f<k;f+=1)d[f].type===e&&(y=d[f]);y?c(g):b(c,d)}else b(c,
d)}):b(c,d):b(c,d)}catch(h){b(c,d)}else a(d,c)}function e(a,b){if(!(this instanceof e))return new e(a,b);this.isEnabled=!0;this.appCacheAdapter=this.adapter=null;this.adapters={types:C,defaults:z};this.resources={defaults:D};this.init(a,b)}var v=h.helpers,p=v.client,u=v.utils,s=u.callback,k=u.getJson(),B=u.xhr,t=u.trim,w=h.cache.storage.adapter,A=p.hasCanvas(),C=[{type:"fileSystem",css:!0,js:!0,html:!0,img:!0},{type:"indexedDatabase",css:!0,js:!0,html:!0,img:!0},{type:"webSqlDatabase",css:!0,js:!0,
html:!0,img:!0},{type:"webStorage",css:!0,js:!0,html:!0,img:!0}],z={name:"localcache",table:"cache",description:"local resource cache",size:4194304,version:"1.0",key:"key",lifetime:"local",offline:!0},x=null,y=null,D={ajax:!0,lifetime:2E4,group:0,lastmod:(new Date).getTime(),type:"css",version:1};e.prototype=e.fn={create:function(a,b){b=s(b);if(a&&a.url){var d=this,e=a.url,g=a.type,k=function(f){if(f)if(a.data=f,a=l(a),null!==d.adapter&&c(g)){f=u.jsonToString(e);var k=m(a,d.resources.defaults),h=
u.jsonToString(k);a.expires=k.expires;a.version=k.version;try{d.adapter.create(f,h,function(c){c?b(a):b(!1)})}catch(s){b(a)}}else b(a);else b(a)};a.ajax?"img"===g?n(e,k):f(e,k,a):a.data?k(a.data):b(!1)}else b(!1)},read:function(a,b){b=s(b);if(a&&a.url){var d=this,e=a.url,g=a.type;if(null!==this.adapter&&c(g))try{d.adapter.read(u.jsonToString(e),function(c){c?(a=q(c))?(a.url=e,b(a,!0)):d.remove({url:e,type:g},function(){b(!1)}):b(!1)})}catch(k){f(e,function(c){a.data=c;b(a,!0)},a)}else b(a)}else b(!1)},
update:function(a,b){b=s(b);if(a&&a.url){var d=this,e=a.url,g=a.type,k=function(f){if(f)if(a.data=f,a=l(a),null!==d.adapter&&c(g)){f=u.jsonToString(e);var k=m(a,d.resources.defaults),h=u.jsonToString(k);a.expires=k.expires;a.version=k.version;try{d.adapter.update(f,h,function(c){c?b(a):b(!1)})}catch(s){b(a)}}else b(a);else d.read(a,function(c){c&&c.data?(a.data=c.data,b(a)):b(!1)})};a.ajax?"img"===g?n(e,k):f(e,k,a):a.data?k(a.data):b(!1)}else b(!1)},remove:function(a,b){b=s(b);if(a&&a.url){var d=
a.url,e=a.type;null!==this.adapter&&c(e)?this.adapter.remove(u.jsonToString(d),function(c){c?b(a):b(!1)}):b(a)}else b(!1)},init:function(a,c){var d=this,e=!1,f,h,p,l;a=s(a);c&&c.isEnabled!==g&&(d.isEnabled=!!c.isEnabled);if(d.isEnabled&&k){if(c){if(c.adapters){f=c.adapters;if(f.types&&u.isArray(f.types)){h=f.types;p=h.length;for(l=0;l<p;l+=1)h[l].css===g&&(h[l].css=!0),h[l].js===g&&(h[l].js=!0),h[l].img===g&&(h[l].img=!0),h[l].html===g&&(h[l].html=!0);d.adapters.types=h}f.defaults&&(h=f.defaults,
p=d.adapters.defaults,h.name&&(p.name=t(String(h.name))),h.table&&(p.table=t(String(h.table))),h.description&&(p.description=t(String(h.description))),h.size&&(p.size=parseInt(h.size,10)),h.version&&(p.version=t(String(h.version))),h.key&&(p.key=t(String(h.key))),h.lifetime&&(p.lifetime=t(String(h.lifetime))),h.offline!==g&&(p.offline=!!h.offline));f.preferredType&&(e=t(String(f.preferredType)))}c.resources&&(f=c.resources,f.defaults&&(f=f.defaults,h=d.resources.defaults,f.ajax!==g&&(h.ajax=!!f.ajax),
f.lifetime!==g&&(h.lifetime=parseInt(f.lifetime,10)),f.group!==g&&(h.group=parseInt(f.group,10)),f.lastmod!==g&&(h.lastmod=parseInt(f.lastmod,10)),f.type&&(h.type=t(String(f.type))),f.group!==g&&(h.version=parseFloat(f.version)),f.loaded&&(h.loaded=s(f.loaded))))}b(function(b){d.adapter=b;a(d)},d.adapters.types,e);d.adapters.defaults.offline&&(w.applicationCache&&!d.appCacheAdapter)&&(d.appCacheAdapter=new w.applicationCache(z))}else a(d)}};h.namespace("cache.storage.controller",e)})(window,document,
window.getNs());
(function(d,r){function h(a){var d=c(a.type);if("js"!==d||"css"!==d||"html"!==d||"img"!==d||"custom"!==d){switch(n.url(a.url).extension){case "js":a="js";break;case "css":a="css";break;case "html":a="html";break;case "jpg":case "jpeg":case "png":a="img";break;default:a="custom"}d=a}return d}function g(a,c){if(!(this instanceof g))return new g(a,c);this.storage=null;this.init(a,c)}var f=d.helpers,q=f.dom,n=f.utils,l=f.client,m=n.isArray,c=n.trim,a=n.callback;g.prototype=g.fn={load:function(b,d){var f=
this,g=(new Date).getTime(),n=function(){var a=0,b=0,c=null;return{init:function(d,e){c=e;a=d;b=0},loaded:function(){b+=1;b===a&&c()}}}(),s=function(a,b,c){var d=a.url,e=function(){a.loaded(a);n.loaded()},f=a.node||null;c=!!c;switch(a.type){case "js":q.appendJs(d,b,e,f,c);break;case "css":q.appendCss(d,b,e,f,c);break;case "img":q.appendImg(d,b,e,f,c);break;case "html":q.appendHtml(d,b,e,f,c);break;default:e()}},k=function(b){var c=b.data||null,d=function(a,b){a&&a.data?s(a,a.data,b):s(a,null,b)},
e=f.storage,h=e.resources.defaults;b.ajax=b.ajax!==r?!!b.ajax:h.ajax;b.loaded=b.loaded!==r?a(b.loaded):a(h.loaded);e.read(b,function(a){if(a&&a.data){var h=b,k=f.storage.resources.defaults,m=parseInt(a.lifetime,10),n=a.version,q=a.lastmod?a.lastmod:0,u=!1,t,x=h.lastmod?h.lastmod:0,u=!0;t=!1;h.version=t=h.version!==r?parseFloat(h.version):k.version;h.group=h.group!==r?parseFloat(h.group):k.group;x&&q?(h.lastmod=parseInt(x,10),u=q===h.lastmod):!x&&q?x=q:x||(x=k.lastmod);u=u&&t===n;t=0!==m&&(-1!==m&&
u&&a.expires>g||-1===m&&u);h.lastmod=x;h.isValid=t;b=h;b.isValid||!l.isOnline()?(c=a.data)&&s(b,c):e.update(b,d)}else e.create(b,d)})},B=function(a,b){var d=0,e=a.length,f=null;n.init(e,b);for(d=0;d<e;d+=1)(f=a[d])&&f.url&&(f.url=c(f.url),f.type=h(f),k(f))},t=function(a,b,c){var d=a.length;for(c||(c=0);!a[c]&&c<d;)c+=1;c>=d?b(f):(d=a[c],B(d,function(){t(a,b,c+1)}))};(function(b,c){b&&m(b)||(b=[]);for(var f=b,g=[],h,k=0,l,s=f.length,k=0;k<s;k+=1)l=f[k],(h=l.group)||(h=0),h=g[h]?g[h]:g[h]=[],h.push(l);
b=g;c=a(d);t(b,c)})(b,d)},remove:function(b,d){var f=this.storage,g=function(a,b){var d=a.length,e,g,l=function(a,c){a===d-1&&b()};if(d)for(e=0;e<d;e+=1)(g=a[e])&&g.url&&(g.url=c(g.url),g.type=h(g),f.remove(g,l(e,g.url)));else b()};(function(b,c){b&&m(b)||(b=[]);c=a(d);g(b,c)})(b,d)},init:function(b,c){var f=this;b=a(b);d.cache.storage.controller(function(a){f.storage=a;b(a)},c);return f}};d.namespace("cache.controller",g)})(window.getNs());
(function(d,r,h){function g(a){this.storage=this.controller=null;this.params=a;this.queue=new l;this.timeout=this.interval=this.calls=0}function f(a){var b=null,d=n.length,e;a||(a={});for(e=0;e<d;e+=1)c(n[e].params)===c(a)&&(b=n[e]);b||(b=new g(a),n.push(b));return b}function q(a,c,g){var h=f(a),k,l,m=function(){k=h.interval;d.clearInterval(k);k=d.setInterval(function(){h.timeout=l=h.timeout+b;h.controller&&h.storage&&(d.clearInterval(k),h.queue.flush());l>e&&(d.clearInterval(k),g())},b)};h||g();
h.storage?c(h):(h.queue.add(function(){c(h)}),h.calls+=1,1===h.calls?h.controller=new r.cache.controller(function(a){h.storage=a;h.controller?h.queue.flush():m()},a):m())}var n=[];h=r.helpers;var l=h.queue;h=h.utils;var m=h.isArray,c=h.jsonToString,a=h.callback,b=25,e=5E3;h=function(){return{load:function(b,c,d){c=a(c);q(d,function(a){m(b)?a.controller.load(b,c):"applicationCache"===b?(a=a.storage)&&a.appCacheAdapter&&!a.appCacheAdapter.opened?a.appCacheAdapter.open(c,d):c():c()},function(){c()})},
remove:function(b,c,d){c=a(c);q(d,function(a){m(b)?a.controller.remove(b,c):c()},function(){c()})}}}();r.namespace("cache.load",h.load);r.namespace("cache.remove",h.remove)})(window,window.getNs());
