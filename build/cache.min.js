(function(c,r){function n(){c[k]||(c[k]={});return c[k]}var k="app",g;g=n();g.namespace=function(g,q){if(g){g=String(g);var m=g.split("."),s=m.length,h=c[k],b;h||(c[k]={});if(!m)return!1;for(b=0;b<s;b+=1)h[m[b]]||(h[m[b]]={},b===s-1&&q&&(h[m[b]]=q)),h=h[m[b]];return h}return!1};c[k]=g;c.getNamespace=c.getNs=n})(window);
(function(c,r){function n(){if(!(this instanceof n))return new n;this.methods=[];this.response=null;this.flushed=!1}n.prototype=n.fn={add:function(c){this.flushed?c(this.response):this.methods.push(c)},flush:function(c){if(!this.flushed)for(this.response=c,this.flushed=!0;this.methods[0];)this.methods.shift()(c)}};c.namespace("helpers.queue",n)})(window.getNs());
(function(c,r,n,k){var g=function(){var p=null,q=c.console!==k,m=q?c.console:null,s=q&&m.log!==k,h=q&&m.warn!==k,b=q&&m.time!==k&&m.timeEnd!==k,e=[];return{isString:function(a){return"string"===typeof a||a instanceof String},isFunction:function(a){return"function"===typeof a||a instanceof Function},isArray:function(a){var d=Array.isArray,f=Object.prototype.toString;g.isArray=d&&"function"===typeof d?function(a){return d(a)}:f&&"function"===f?function(a){return"[object Array]"===f.call(a)}:function(a){return!!a.sort&&
"function"===typeof a.sort};return g.isArray(a)},inArray:function(a,d,f){g.inArray=Array.prototype.indexOf?function(a,d,f){return e.indexOf.call(d,a,f)}:function(a,d,f){var e=d.length,b=0;if(f)return d[f]&&d[f]===a?f:-1;for(b=0;b<e;b+=1)if(d[b]===a)return b;return-1};return g.inArray(a,d,f)},callback:function(a){g.isFunction(a)||(a=function(){});return a},on:function(a,d,f){g.on="function"===typeof c.addEventListener?function(a,d,f){a.addEventListener(d,f,!1)}:"function"===typeof r.attachEvent?function(a,
d,f){a.attachEvent("on"+d,f)}:function(a,d,f){a["on"+d]=f};g.on(a,d,f)},off:function(a,d,f){g.off="function"===typeof c.removeEventListener?function(a,d,f){a.removeEventListener(d,f,!1)}:"function"===typeof r.detachEvent?function(a,d,f){a.detachEvent("on"+d,f)}:function(a,d){a["on"+d]=null};g.off(a,d,f)},getXhr:function(){for(var a=null,d=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],
f=d.length,e=0,e=0;e<f;e+=1){try{a=d[e]()}catch(b){continue}break}return a},xhr:function(a,d,f,e){var b=g.getXhr(),c,h="GET";d=g.callback(d);if(b)if(a){e!==k?h="POST":e=null;f===k&&(f=!0);c=function(){if(4===b.readyState&&(200<=b.status&&400>b.status||0===b.status))try{var a=b.responseText;a?d(a):d(!1)}catch(f){d(!1)}else 4===b.readyState&&d(!1)};b.open(h,a,f);try{b.onreadystatechange!==k?b.onreadystatechange=c:b.onload!==k&&(b.onload=c)}catch(s){b.onload=null,b.onload=c}b.send(e)}else d(!1);else d(!1)},
getJson:function(){null===p&&(c.JSON&&c.JSON.stringify)&&(p=c.JSON);return p},jsonToString:function(a){var d=!1;null===p&&(p=g.getJson());p&&a&&(d=p.stringify(a));return d},jsonToObject:function(a){var d=!1;null===p&&(p=g.getJson());p&&a&&(d=p.parse(a));return d},logToScreen:function(a){var d=r.getElementById("log"),f=r.createElement("p");a=r.createTextNode(a);d&&(f.appendChild(a),d.appendChild(f))},log:function(){var a=arguments;a.length&&(s&&m.log.apply(m,a),a=a[0],g.logToScreen(a))},warn:function(){var a=
arguments,d;a.length&&(d=a[0],h?m.warn.apply(m,a):g.log(d),g.logToScreen(d))},logTimerStart:function(a){b&&c.console.time(a)},logTimerEnd:function(a){b&&c.console.timeEnd(a)},url:function(a){if(g.isString(a)){var d=r.createElement("a"),f;d.href=a;f=d.pathname.match(/\/([^\/?#]+)$/i);return{source:a,protocol:d.protocol,host:d.hostname,port:d.port,query:d.search,file:f?f[1]:"/",hash:d.hash,path:d.pathname.replace(/^([^\/])/,"/$1"),extension:function(a){a=a.split(".");return a.length?a[a.length-1]:!1}(a),
folder:function(){var d=a.lastIndexOf("/");return a.substr(0,d+1)}()}}},queryString:function(a){a={};for(var d=c.location.search.substring(1).split("&"),f=d.length,b=0,e,h,b=0;b<f;b+=1)e=d[b].split("="),a[e[0]]===k?a[e[0]]=e[1]:"string"===typeof a[e[0]]?(h=[a[e[0]],e[1]],a[e[0]]=h):a[e[0]].push(e[1]);return a}(),sprintf:function(a){var d=1,f=arguments;return a.replace(/%s/g,function(){return d<f.length?f[d++]:""})},trim:function(a){if(!g.isString(a))return a;g.isFunction(String.prototype.trim)||(String.prototype.trim=
function(){return this.replace(/^\s+|\s+$/g,"")});return a.trim()}}}();n.namespace("helpers.utils",g)})(window,document,window.getNs());
(function(c,r,n,k){var g=function(){function g(){parseInt(c.orientation,10)}function q(){d||(t(c,"orientationchange",g),d=!0)}function m(){e===k&&(t(c,"online",m),t(c,"offline",m));e=r.onLine!==k?!!r.onLine:!0}var s,h,b,e,a,d,f=(r.userAgent||r.vendor||c.opera).toLowerCase(),t=n.helpers.utils.on;return{isiOS:function(){s===k&&(s=null!==f.match(/(iphone|ipod|ipad)/))&&q();return s},isOpera:function(){void 0===k&&checkIfIsOpera()},isMsie:function(){h===k&&(h=null!==f.match(/(msie)/));return h},isMobile:function(){b===
k&&(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(f)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(f.substr(0,
4))?(b=!0,q()):b=!1);return b},isOnline:function(){e===k&&m();return e},hasCanvas:function(){if(a===k){var d=document.createElement("canvas");a=!(!d.getContext||!d.getContext("2d"))}return a}}}();n.namespace("helpers.client",g)})(window,window.navigator,window.getNs());
(function(c,r,n){function k(g,k){k&&(k.dom?g=k.dom:k.id&&(g=c.getElementById(k.id)));return g}var g=function(){var p=r.helpers,q=p.utils,m=p.client,s=[],h=[],b=[],e=[],a=c.getElementsByTagName("head")[0];return{nuke:function(){s=[];h=[];b=[];e=[]},createDomNode:function(a,f){var e=c.createElement(a),b;if(f)for(b in f)f.hasOwnProperty(b)&&e.setAttribute(b,f[b]);return e},hasClass:function(a,b){return RegExp(" "+b+" ").test(" "+a.className+" ")},getAttribute:function(a,b){return a.getAttribute(b)},
setAttribute:function(a,b,e){a.setAttribute(b,e)},appendCss:function(d,b,e,h,l){if(-1===q.inArray(d,s)||l){var n;l=k(null,h);if(null!==b){l||(l=g.createDomNode("style",{type:"text/css"}),l.className="lazyloaded");l.onerror=function(){e(!1)};h||a.appendChild(l);try{n=c.createTextNode(b),l.appendChild(n)}catch(u){l.styleSheet.cssText=b}finally{e()}}else null!==d&&(l||(l=g.createDomNode("link",{rel:"stylesheet",type:"text/css"}),l.className="lazyloaded"),l.onerror=function(){e(!1)},h||a.appendChild(l),
m.isMsie()||m.isOpera()?l.onload=e:e(),l.href=d);s.push(d)}else e()},appendJs:function(b,e,t,s,l){if(-1===q.inArray(b,h)||l){l=g.createDomNode("script");var n=c.getElementsByTagName("script")[0],u=!1;(l=k(l,s))?(l.type="text/javascript",l.className="lazyloaded",l.async=!0,l.onreadystatechange=l.onload=function(){u||this.readyState&&"complete"!==this.readyState&&"loaded"!==this.readyState||(this.onreadystatechange=this.onload=null,u=!0,h.push(b),t())},l.onerror=function(){this.onload=this.onreadystatechange=
this.onerror=null;t()},s||(n?n.parentNode.insertBefore(l,n):a.appendChild(l)),e&&!u?(l.textContent?l.textContent=e:l.nodeValue?l.nodeValue=e:l.text=e,u=!0):null!==b&&(l.src=b),u&&(h.push(b),t())):t()}else t()},appendImg:function(a,e,c,h){var l=null;(l=k(l,h))||(l=new Image);l.onerror=function(){l.onload=l.onerror=null;c()};l.onload=function(){l.onload=l.onerror=null;c()};e?l.src=e:a&&(l.src=a);if(l.complete&&l.naturalWidth!==n)l.onload();b.push(a)},appendHtml:function(a,b,h,g){var l=k(null,g);if(l){if(b)try{l.innerHTML=
b,g.id&&m.isMsie()&&c.styleSheets[0].addRule("#"+g.id+":after","content: ' ';")}catch(s){l.innerText=b}h();e.push(a)}else h()}}}();r.namespace("helpers.dom",g)})(document,window.getNs());
(function(c,r){function n(b){}function k(b,a,d){if("."===a[0]||""===a[0])a=a.slice(1);a[0]?b.getDirectory(a[0],{create:!0},function(b){a.length?k(b,a.slice(1),d):d()},n):d()}function g(b,a,d){a=a.split("/");var f=a.length,c="",g=0;d=h(d);if(f){for(g=0;g<f-1;g+=1)c=c+a[g]+"/";k(b.root,c.split("/"),d)}else d()}function p(b){if(!(this instanceof p))return new p(b);this.adapter=null;this.type=q;this.size=52428800;this.init(b)}var q="fileSystem",m=c.getNs&&c.getNs()||c,s=m.helpers.utils,h=s.callback,b=
null;p.prototype=p.fn={isSupported:function(){null===b&&(b=(!!c.requestFileSystem||!!c.webkitRequestFileSystem||!!c.moz_requestFileSystem)&&(!!c.Blob||!!c.BlobBuilder));return b},open:function(b){var a=this,d=a.adapter;b=h(b);null===d?(c.requestFileSystem=c.requestFileSystem||c.webkitRequestFileSystem||c.moz_requestFileSystem,c.requestFileSystem(c.TEMPORARY,a.size,function(f){d=a.adapter=f;try{a.create("test-item",s.jsonToString({test:"test-content"}),function(f){f?a.remove("test-item",function(){b(d)}):
b(!1)})}catch(c){b(!1)}},n)):b(d)},create:function(b,a,d){d=h(d);var f=this.adapter,c=function(a){d(!1,a)};g(f,b,function(){f.root.getFile(b,{create:!0},function(b){b.createWriter(function(b){var e;b.onwriteend=function(){d(!0)};b.onerror=c;try{Blob?(e=new Blob([a],{type:"text/plain"}),b.write(e)):BlobBuilder&&(e=new BlobBuilder,e.append(a),b.write(e.getBlob("application/json")))}catch(f){c(f)}},c)},c)})},read:function(b,a){a=h(a);var d=this.adapter,f=function(b){a(!1,b)};g(d,b,function(){d.root.getFile(b,
{create:!1},function(b){b.file(function(b){var e=new FileReader;e.onloadend=function(){a(this.result)};e.readAsText(b)},f)},f)})},update:function(b,a,d){this.create(b,a,d)},remove:function(b,a){a=h(a);var d=this.adapter,f=function(b){a(!1,b)};g(d,b,function(){d.root.getFile(b,{create:!1},function(b){b.remove(function(){a(!0)},f)},f)})},init:function(b){return this.isSupported()?(b&&b.size&&(this.size=b.size),this):!1}};s.isFunction(m.namespace)?m.namespace("cache.storage.adapter."+q,p):m[q]=p})(window);
(function(c,r){function n(c){if(!(this instanceof n))return new n(c);this.adapter=null;this.type=k;this.dbName="cache";this.dbVersion="1.0";this.dbTable="offline";this.dbDescription="Local offline cache";this.dbKey="key";this.init(c)}var k="indexedDatabase",g=c.getNs&&c.getNs()||c,p=g.helpers.utils,q=p.callback,m=null;n.prototype=n.fn={isSupported:function(){null===m&&(m=!!c.indexedDB||!!c.webkitIndexedDB||!!c.mozIndexedDB||!!c.OIndexedDB||!!c.msIndexedDB);return m},create:function(c,h,b){var e=this.dbTable,
a=this.adapter.transaction([e],"readwrite");c=a.objectStore(e).put({key:c,content:h});b=q(b);a.onerror=function(a){b(!1,a)};c.onerror=function(a){b(!1,a)};c.onsuccess=function(){b(!0)}},read:function(c,h){h=q(h);var b=this.dbTable,e=this.adapter.transaction([b],"readonly"),b=e.objectStore(b).get(c);e&&b?(e.onerror=function(a){h(!1,a)},b.onerror=function(a){h(!1,a)},b.onsuccess=function(a){a.target.result&&a.target.result.content?h(a.target.result.content):h(!1)}):h(!1)},update:function(c,h,b){this.create(c,
h,b)},remove:function(c,h){h=q(h);var b=this.dbTable,e=this.adapter.transaction([b],"readwrite"),b=e.objectStore(b).put({key:c,content:""});e.onerror=function(a){h(!1,a)};b.onerror=function(a){h(!1,a)};b.onsuccess=function(){h(!0)}},open:function(g,h){var b=this,e=null,a=null,d=null,f=b.dbName,k=b.dbTable,n=function(a){a||g(!1);b.create("test-item",'{test: "test-content"}',function(e){e?b.remove("test-item",function(){g(a)}):g(!1)})},l,m,u,p;h||(h=!1);g=q(g);if(null===b.adapter)if(e=c.indexedDB||
c.webkitIndexedDB||c.mozIndexedDB||c.OIndexedDB||c.msIndexedDB){c.webkitIndexedDB!==r&&(c.IDBTransaction=c.webkitIDBTransaction,c.IDBKeyRange=c.webkitIDBKeyRange);l=function(e){var f=a.result,c,h;b.adapter=f;b.dbVersion===f.version||!f.setVersion&&"function"!==typeof f.setVersion?(b.adapter=f,n(f)):(d=e.currentTarget.result.setVersion(b.dbVersion),d.onfailure=function(a){g(!1)},d.onsuccess=function(e){c=a.result;h=c.createObjectStore(k,{keyPath:b.dbKey});h.createIndex("key","key",{unique:!0});h.createIndex("content",
"content",{unique:!1})})};m=function(e){e=a.result.createObjectStore(k,{keyPath:b.dbKey});e.createIndex("key","key",{unique:!0});e.createIndex("content","content",{unique:!1})};u=function(a){h||b.open(g,!0);g(!1)};p=function(a){g(!1)};if(h)try{a=e.open(f,b.dbVersion)}catch(z){a=e.open(f)}else a=e.open(f);a.onsuccess=l;a.onupgradeneeded=m;a.onerror=u;a.onblocked=p}else g(!1);else n(b.adapter)},init:function(c){return this.isSupported()?(c&&(c.name&&(this.dbName=c.name),c.version&&(this.dbVersion=c.version),
c.table&&(this.dbTable=c.table),c.description&&(this.dbDescription=c.description),c.key&&(this.dbKey=c.key)),this):!1}};p.isFunction(g.namespace)?g.namespace("cache.storage.adapter."+k,n):g[k]=n})(window);
(function(c,r){function n(c,b,e,a,d,f){!f&&c?c.transaction(function(c){c.executeSql(b,e,a,d)}):f?f.executeSql(b,e,a,d):d(null,{code:0,message:"The storage adapter isn't available"})}function k(c){if(!(this instanceof k))return new k(c);this.adapter=null;this.type=g;this.dbName="cache";this.dbVersion="1.0";this.dbDescription="resource cache";this.dbTable="websql";this.dbSize=4194304;this.init(c)}var g="webSqlDatabase",p=c.getNs&&c.getNs()||c,q=p.helpers.utils,m=q.callback,s=null;k.prototype=k.fn={isSupported:function(){null===
s&&(s=!!c.openDatabase);return s},create:function(c,b,e){e=m(e);n(this.adapter,"INSERT INTO "+this.dbTable+" (key, content) VALUES (?,?);",[c,b],function(){e(!0)},function(a,b){e(!1,b,{transaction:a})})},read:function(c,b){b=m(b);n(this.adapter,"SELECT content FROM "+this.dbTable+" WHERE key=?;",[c],function(e,a){var c=!1;a&&(a.rows&&1===a.rows.length)&&(c=a.rows.item(0).content);b(c,null,{transaction:e})},function(e,a){b(!1,a,{transaction:e})})},update:function(c,b,e){e=m(e);n(this.adapter,"UPDATE "+
this.dbTable+" SET content = ?  WHERE key=?;",[b,c],function(){e(!0)},function(a,b){e(!1,b,{transaction:a})})},remove:function(c,b){b=m(b);n(this.adapter,"DELETE FROM "+this.dbTable+" WHERE key = ?;",[c],function(){b(!0)},function(e,a){b(!1,a,{transaction:e})})},open:function(h){h=m(h);var b=this,e=b.adapter,a=function(a){a||h(!1);b.create("test-item",'{test: "test-content"}',function(e){e?b.remove("test-item",function(){h(a)}):h(!1)})},d=function(e,c){n(e,"CREATE TABLE IF NOT EXISTS "+b.dbTable+
"(id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, key TEXT NOT NULL UNIQUE, content TEXT NOT NULL);",[],function(){a(e)},function(b){a(!1)},c)},f=function(a){d(null,a)},g=function(a){h(!1)};try{if(null===e&&b.isSupported())if(b.adapter=e=c.openDatabase(b.dbName,"",b.dbDescription,b.dbSize),String(e.version)!==String(b.dbVersion)&&e.changeVersion&&"function"===typeof e.changeVersion)try{e.changeVersion(e.version,b.dbVersion,f,g)}catch(k){h(!1)}else e=c.openDatabase(b.dbName,b.dbVersion,b.dbDescription,
b.dbSize),d(e);else b.isSupported()&&a(e)}catch(l){h(!1)}},init:function(c){return this.isSupported()?(c&&(c.description&&(this.dbDescription=c.description),c.name&&(this.dbName=c.name),c.size&&(this.dbSize=c.size),c.table&&(this.dbTable=c.table),c.version&&(this.dbVersion=String(c.version))),this):!1}};q.isFunction(p.namespace)?p.namespace("cache.storage.adapter."+g,k):p[g]=k})(window);
(function(c,r){function n(b){}function k(b){switch(b){case "local":b="localStorage";break;case "session":b="sessionStorage";break;default:b="localStorage"}return b}function g(b){if(!(this instanceof g))return new g(b);this.adapter=null;this.type=p;this.lifetime="local";this.init(b)}var p="webStorage",q=c.getNs&&c.getNs()||c,m=q.helpers.utils,s=m.on,h=m.callback,b=null;g.prototype=g.fn={isSupported:function(){var e=k(this.lifetime);if(null===b)try{b=!!c[e]&&!!c[e].getItem}catch(a){b=!1}return b},create:function(b,
a,c){var f=!0;c=h(c);try{this.adapter.setItem(b,a),c(f)}catch(g){f=!f,c(f,g)}return f},read:function(b,a){var c;a=h(a);try{(c=this.adapter.getItem(b))?a(c):a(!1)}catch(f){a(!1,f)}return c},update:function(b,a,c){return this.create(b,a,c)},remove:function(b,a){var c=!0;a=h(a);try{this.adapter.removeItem(b),a(c)}catch(f){c=!c,a(c,f)}return c},open:function(b){var a=this,d=a.adapter,f=k(a.lifetime);b=h(b);if(null===d)try{d=a.adapter=c[f],s(c,"storage",n),a.create("test-item",'{test: "test-content"}',
function(c){c?a.remove("test-item",function(){b(d)}):b(!1)})}catch(g){b(!1)}else a.isSupported()&&b(d)},init:function(b){return this.isSupported()?(b&&b.lifetime&&(this.lifetime=b.lifetime),this):!1}};m.isFunction(q.namespace)?q.namespace("cache.storage.adapter."+p,g):q[p]=g})(window);
(function(c,r,n){function k(b,a){a.isLoaded||(a.isLoaded=!0,a.progressCallback(100),c.setTimeout(function(){b()},a.delay))}function g(b){if(!(this instanceof g))return new g(b);this.adapter=null;this.type=p;this.isLoaded=!1;this.delay=25;this.init(b)}var p="applicationCache",q=c.getNs&&c.getNs()||c,m=q.helpers,s=m.utils,h=m.dom,b=s.on,e=s.callback,a=null,d=r.getElementsByTagName("html")[0];g.prototype=g.fn={isSupported:function(){null===a&&(a=!!c.applicationCache&&!!h.getAttribute(d,"manifest"));
return a},open:function(a,d){var g=this,h=g.adapter,m=0,u,p;a=e(a);d&&d.progress&&(u=d.progress);u=g.progressCallback=e(u);if(g.isSupported()&&null!==h){p=function(){try{h.swapCache()}catch(b){}confirm("A new version of this website is available. Do you want to an update?")?c.location.reload(!0):k(a,g);return!1};b(h,"noupdate",function(){k(a,g);return!1});b(h,"downloading",function(){m=0;return!1});b(h,"progress",function(a){var b="";g.delay=500;m+=1;b=a&&a.lengthComputable!==n?Math.round(100*a.loaded/
a.total):Math.round(100*m/20);u(b);return!1});b(h,"cached",function(){k(a,g);return!1});b(h,"updateready",function(){p()});b(h,"obsolete",function(){c.location.reload(!0);return!1});b(h,"error",function(){k(a,g);return!1});switch(h.status){case h.UNCACHED:k(a,g);break;case h.IDLE:k(a,g);break;case h.UPDATEREADY:p();break;case h.OBSOLETE:k(a,g)}b(c,"online",function(){try{h.update()}catch(a){}});c.setTimeout(function(){g.isLoaded||k(a,g)},12E3)}else k(a,g)},init:function(a){a=this.adapter;this.isSupported()&&
null===a&&(this.adapter=c.applicationCache);return this}};q.namespace("cache.storage.adapter."+p,g)})(window,document);
(function(c,r,n,k){function g(a,b,e){e.timeout=c.setTimeout(function(){b(!1)},5E3);B(a,function(a){c.clearTimeout(e.timeout);delete e.timeout;a?b(a):b(!1)})}function p(a){var b=null;try{b=t.jsonToObject(a)}catch(c){}return b}function q(a,b,c){if(C){var e=r.createElement("canvas"),d,f=new Image,g=null,h=0,l=0;c||(c="jpeg");f.onerror=function(){f.onload=f.onerror=null;b()};f.onload=function(){f.onload=f.onerror=null;h=e.height=f.height;l=e.width=f.width;d=e.getContext("2d");d.fillStyle="rgba(50, 50, 50, 0)";
d.fillRect(0,0,l,h);d.drawImage(f,0,0);g=e.toDataURL("image/"+c);b(g)};f.src=a;if(f.complete&&f.naturalWidth!==k)f.onload()}else b(!1)}function m(a){var b=a.data,c=a.url;"css"===a.type&&(c=t.url(c),c=c.folder,b=b.replace(/url\(\../g,"url("+c+".."),b=b.replace(/url\(\'../g,"url('"+c+".."),b=b.replace(/url\(\"../g,'url("'+c+".."),a.data=b);return a}function s(a){return{ajax:a.ajax,data:a.data,expires:(new Date).getTime()+(a.lifetime||y.lifetime),group:a.group!==k?a.group:y.group,lastmod:a.lastmod||
y.lastmod,lifetime:a.lifetime!==k?a.lifetime:y.lifetime,type:a.type||y.type,version:a.version||y.version}}function h(a){return A&&A[a]?!!A[a]:!1}function b(a,c){var e=null,d;a&&a.length?(d=a[0].type,u[d]?e=new u[d](v):b(a.slice(1),c),e&&e.isSupported()?e.open(function(f){f?(x=d,A=a[0],c(e)):b(a.slice(1),c)}):b(a.slice(1),c)):x||c(!1)}function e(a,c){var d=null,f=0,g;if(c)try{u[c]?d=new u[c](v):e(a),d&&d.isSupported()?d.open(function(b){if(b){x=c;g=z.length;for(f=0;f<g;f+=1)z[f].type===c&&(A=z[f]);
A?a(d):e(a)}else e(a)}):e(a)}catch(h){e(a)}else b(z,a)}function a(b,c){if(!(this instanceof a))return new a(b,c);this.isEnabled=!0;this.adapter=null;this.adapters={types:z,defaults:v};this.appCacheAdapter=null;this.resourceDefaults=y;this.init(b,c)}var d=n.helpers,f=d.client,t=d.utils,w=t.callback,l=t.getJson(),B=t.xhr,u=n.cache.storage.adapter,C=f.hasCanvas(),z=[{type:"fileSystem",css:!0,js:!0,html:!0,img:!0},{type:"indexedDatabase",css:!0,js:!0,html:!0,img:!0},{type:"webSqlDatabase",css:!0,js:!0,
html:!0,img:!0},{type:"webStorage",css:!0,js:!0,html:!0,img:!0}],v={name:"localcache",table:"cache",description:"local resource cache",size:4194304,version:"1.0",key:"key",lifetime:"local",offline:!0},x=null,A=null,y={ajax:!0,lifetime:2E4,group:0,lastmod:(new Date).getTime(),type:"css",version:1};a.prototype=a.fn={create:function(a,b){var c=this,e=a.url,d=a.type,f=function(f){if(f)if(a.data=f,a=m(a),null!==c.adapter&&h(d)){f=t.jsonToString(e);var g=s(a),k=t.jsonToString(g);a.expires=g.expires;a.version=
g.version;try{c.adapter.create(f,k,function(c){c?b(a):b(!1)})}catch(l){b(a)}}else b(a);else b(a)};b=w(b);a.ajax?"img"===d?q(e,f):g(e,f,a):a.data?f(a.data):b(!1)},read:function(a,b){var c=this,e=a.url,f=a.type;b=w(b);if(null!==this.adapter&&h(f))try{c.adapter.read(t.jsonToString(e),function(d){d?(a=p(d))?(a.url=e,b(a,!0)):c.remove({url:e,type:f},function(){b(!1)}):b(!1)})}catch(d){g(e,function(c){a.data=c;b(a,!0)},a)}else b(a)},update:function(a,b){var c=this,e=a.url,f=a.type,d=function(d){if(d)if(a.data=
d,a=m(a),null!==c.adapter&&h(f)){d=t.jsonToString(e);var g=s(a),k=t.jsonToString(g);a.expires=g.expires;a.version=g.version;try{c.adapter.update(d,k,function(c){c?b(a):b(!1)})}catch(l){b(a)}}else b(a);else c.read(a,function(c){c&&c.data?(a.data=c.data,b(a)):b(!1)})};b=w(b);a.ajax?"img"===f?q(e,d):g(e,d,a):a.data?d(a.data):b(!1)},remove:function(a,b){var c=a.url,e=a.type;b=w(b);null!==this.adapter&&h(e)?this.adapter.remove(t.jsonToString(c),function(c){c?b(a):b(!1)}):b(a)},init:function(a,b){var c=
this,d=!1;a=w(a);b&&b.isEnabled!==k&&(c.isEnabled=!!b.isEnabled);c.isEnabled&&l?(b&&(b.description&&(v.description=String(b.description)),b.key&&(v.key=String(b.key)),b.lifetime&&(v.lifetime=String(b.lifetime)),b.name&&(v.name=String(b.name)),b.size&&(v.size=parseInt(b.size,10)),b.table&&(v.table=String(b.table)),b.type&&(v.type=d=String(b.type)),b.offline&&(v.offline=Boolean(b.offline)),b.version&&(v.version=String(b.version))),v.offline&&u.applicationCache&&(c.appCacheAdapter=new u.applicationCache(v)),
e(function(b){c.adapter=b;a(c)},d)):a(c)}};t.isFunction(n.namespace)?n.namespace("cache.storage.controller",a):n.storage=a})(window,document,window.getNs());
(function(c,r,n){function k(b){b=q.url(b).extension;switch(b){case "js":b="js";break;case "css":b="css";break;case "html":b="html";break;case "jpg":case "jpeg":case "png":b="img";break;default:b="custom"}return b}function g(b,c){if(!(this instanceof g))return new g(b,c);this.storage=null;this.init(b,c)}c=r.helpers;var p=c.dom,q=c.utils,m=c.client,s=q.isArray,h=q.callback;g.prototype=g.fn={load:function(b,c){var a=this,d=(new Date).getTime(),f=function(){var a=0,b=0,c=null;return{init:function(d,e){c=
e;a=d;b=0},loaded:function(){b+=1;b===a&&c()}}}(),g=function(a,b,c){var d=a.url,e=h(a.loaded),g=function(){f.loaded();e(a)},k=a.node||null;c=!!c;switch(a.type){case "js":p.appendJs(d,b,g,k,c);break;case "css":p.appendCss(d,b,g,k,c);break;case "img":p.appendImg(d,b,g,k,c);break;case "html":p.appendHtml(d,b,g,k,c);break;default:g()}},q=function(b){var c=b.data||null,e=function(a,b){a&&a.data?g(a,a.data,b):g(a,null,b)},f=a.storage,h=f.resourceDefaults;b.ajax=b.ajax!==n?!!b.ajax:h.ajax;f.read(b,function(h){if(h&&
h.data){var k=b,l=a.storage.resourceDefaults,p=parseInt(h.lifetime,10),q=h.version,s=h.lastmod?h.lastmod:0,r=!1,w,x=k.lastmod?k.lastmod:0,r=!0;w=!1;k.version=w=k.version!==n?parseFloat(k.version):l.version;k.group=k.group!==n?parseFloat(k.group):l.group;x&&s?(k.lastmod=parseInt(x,10),r=s===k.lastmod):!x&&s?x=s:x||(x=l.lastmod);r=r&&w===q;w=0!==p&&(-1!==p&&r&&h.expires>d||-1===p&&r);k.lastmod=x;k.isValid=w;b=k;b.isValid||!m.isOnline()?(c=h.data)&&g(b,c):f.update(b,e)}else f.create(b,e)})},l=function(a,
b){var c=0,d=a.length,e=null;f.init(d,b);for(c=0;c<d;c+=1)(e=a[c])&&e.url&&(e.type||(e.type=k(e.url)),q(e))},r=function(a,b,c){var d=a.length;for(c||(c=0);!a[c]&&c<d;)c+=1;c>=d?b():(d=a[c],l(d,function(){r(a,b,c+1)}))};(function(a,b){a&&s(a)||(a=[]);for(var d=a,f=[],g,k=0,l,m=d.length,k=0;k<m;k+=1)l=d[k],(g=l.group)||(g=0),g=f[g]?f[g]:f[g]=[],g.push(l);a=f;b=h(c);r(a,b)})(b,c)},remove:function(b,c){var a=this.storage,d=function(b,c){var d=b.length,e,g,h=function(a,b){a===d-1&&c()};if(d)for(e=0;e<
d;e+=1)(g=b[e])&&g.url&&(g.type||(g.type=k(g.url)),a.remove(g,h(e,g.url)));else c()};(function(a,b){a&&s(a)||(a=[]);b=h(c);d(a,b)})(b,c)},init:function(b,c){var a=this;b=h(b);r.cache.storage.controller(function(c){a.storage=c;b(c)},c)}};q.isFunction(r.namespace)?r.namespace("cache.controller",g):r.cache=g})(window,window.getNs());
(function(c,r,n){function k(b){this.storage=this.controller=null;this.params=b;this.queue=new h;this.calls=0}function g(c){var a=null,d=b.length,f;c||(c={});for(f=0;f<d;f+=1)s(b[f].params)===s(c)&&(a=b[f]);a||(a=new k(c),b.push(a));return a}var p=r.cache.controller;n=r.helpers;var q=n.utils,m=q.isArray,s=q.jsonToString,h=n.queue,b=[];r.namespace("cache.load",function(b,a,d){var f=g(d),h=function(a,b,c){m(a)?f.controller.load(a,b):"applicationCache"===a&&((a=f.storage)&&a.appCacheAdapter?a.appCacheAdapter.open(b,
d):b())};f.storage?h(b,a,d):(f.queue.add(function(){h(b,a,d)}),f.calls+=1,1===f.calls&&(f.controller=new p(function(a){f.storage=a;f.controller?f.queue.flush(this):f.interval=c.setInterval(function(){f.controller&&(c.clearInterval(f.interval),f.queue.flush(this))},25)},d)));return this})})(window,window.getNs());
